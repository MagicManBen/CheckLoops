:root{
  /* Enhanced contrast theme for better readability */
  --bg1:#0b4fb3; --bg2:#062b6f; --glass:#ffffff20; --glass-2:#ffffff28;
  --white:#ffffff; --muted:#f0f7ff; --ink:#ffffff;
  --accent:#8ab4ff; --accent-2:#6fa3ff; --success:#4ddc9f; --danger:#ff7d7d;
  --warning: #ffd645;
  --shadow: 0 12px 35px rgba(0,0,0,.45);
  --round:18px;
  --panel-bg: linear-gradient(145deg, rgba(25, 65, 155, 0.95), rgba(15, 45, 100, 0.95));
  --border-color: #ffffff35;
  /* fallback for lighter inner cards to ensure visibility on white backgrounds */
  --border-weak: rgba(15,23,42,0.06);
  --stat-1-bg: #9e7eff40; --stat-1-color: #d4c5ff;
  --stat-2-bg: #4ddc9f40; --stat-2-color: #7ef7c7;
  --stat-3-bg: #ffd64540; --stat-3-color: #fff092;
  --stat-4-bg: #ff7d7d40; --stat-4-color: #ffb5b5;
  /* Animated gradient for backgrounds */
  --animated-gradient: linear-gradient(270deg, #1a469d, #2557b3, #1a469d);
  --text-shadow: 0 2px 8px rgba(0,0,0,0.4);
}
*{box-sizing:border-box}
html,body{height:100%}
body{ margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif; color:var(--ink); background:#0b3a86; overflow-x:hidden; }

/* Silky animated background matching homepage.html */
.bg{
  position:fixed; inset:0; z-index:-10; overflow:hidden; 
  background: radial-gradient(1200px 700px at 20% -10%, #6aa0ff33, transparent),
    radial-gradient(900px 600px at 90% 10%, #3566ff2e, transparent),
    linear-gradient(180deg, #0e3f93 0%, #082a69 100%);
  pointer-events: none; /* Prevent background from intercepting clicks */
}
.wave{ position:absolute; width:160%; height:160%; left:-30%; top:-30%;
  background: conic-gradient(from 180deg at 50% 50%, rgba(92,120,255,0.16), rgba(56,42,122,0.12), rgba(34,203,186,0.10));
  filter: blur(80px) saturate(140%);
  animation: drift 26s ease-in-out infinite alternate, waveHue 40s linear infinite;
  transform-origin: 50% 50%;
  mix-blend-mode: screen;
  opacity: 0.98;
  pointer-events: none; /* Prevent wave from intercepting clicks */
}
.wave2{ animation-duration: 32s; mix-blend-mode: screen; opacity:0.92; }
@keyframes drift{
  0%{ transform: rotate(0deg) scale(1.0); }
  40%{ transform: rotate(18deg) scale(1.06); }
  70%{ transform: rotate(8deg) scale(1.03); }
  100%{ transform: rotate(26deg) scale(1.1); }
}
@keyframes waveHue{
  0%{ filter: blur(80px) hue-rotate(0deg) saturate(120%); }
  50%{ filter: blur(92px) hue-rotate(36deg) saturate(160%); }
  100%{ filter: blur(80px) hue-rotate(0deg) saturate(120%); }
}

/* Extra animated mesh and orbs for depth */
.mesh{ position: fixed; inset: -20% -20% -20% -20%; z-index:-10; pointer-events:none; filter: blur(40px) saturate(120%); opacity:.55; }
.m1, .m2, .m3 { position:absolute; border-radius:50%; }
.m1{ width:55vw; height:55vw; left:-18%; top:-18%;
  background: radial-gradient(closest-side, rgba(79,137,255,0.12), transparent 72%);
  animation: blobA 22s ease-in-out infinite alternate;
  will-change: transform, opacity;
}
.m2{ width:48vw; height:48vw; right:-14%; top:6%;
  background: radial-gradient(closest-side, rgba(43,212,167,0.10), transparent 72%);
  animation: blobB 20s ease-in-out infinite alternate;
  will-change: transform, opacity;
}
.m3{ width:62vw; height:62vw; left:14%; bottom:-20%;
  background: radial-gradient(closest-side, rgba(255,202,40,0.10), transparent 72%);
  animation: blobC 24s ease-in-out infinite alternate;
  will-change: transform, opacity;
}
@keyframes blobA{
  0% { transform: translate(0,0) rotate(0deg) scale(1); opacity:0.95; }
  25% { transform: translate(8%,6%) rotate(18deg) scale(1.02); opacity:0.9; }
  50% { transform: translate(-10%,12%) rotate(36deg) scale(1.06); opacity:0.85; }
  75% { transform: translate(12%,-6%) rotate(12deg) scale(1.03); opacity:0.9; }
  100% { transform: translate(-6%,10%) rotate(30deg) scale(1.08); opacity:0.88; }
}
@keyframes blobB{
  0% { transform: translate(0,0) rotate(0deg) scale(1); opacity:0.95; }
  20% { transform: translate(-10%,-6%) rotate(-18deg) scale(1.04); opacity:0.9; }
  50% { transform: translate(14%,10%) rotate(-48deg) scale(1.08); opacity:0.85; }
  80% { transform: translate(-8%,18%) rotate(-28deg) scale(1.02); opacity:0.9; }
  100% { transform: translate(-4%,6%) rotate(-25deg) scale(1.05); opacity:0.87; }
}
@keyframes blobC{
  0% { transform: translate(0,0) rotate(0deg) scale(1); opacity:0.95; }
  30% { transform: translate(10%,-12%) rotate(10deg) scale(1.05); opacity:0.9; }
  60% { transform: translate(-18%,8%) rotate(30deg) scale(1.1); opacity:0.82; }
  90% { transform: translate(8%,-4%) rotate(6deg) scale(1.02); opacity:0.9; }
  100% { transform: translate(4%,-3%) rotate(18deg) scale(1.06); opacity:0.88; }
}

/* Enhanced floating particles animation - only on staff home page */
.staff-home-particles .particles { position: fixed; inset: 0; z-index: -1; pointer-events: none; overflow: hidden; }
.staff-home-particles .particle { 
  position: absolute; 
  width: 8px; 
  height: 8px; 
  background: rgba(138, 180, 255, 0.95); 
  border-radius: 50%; 
  animation: floatAround 24s cubic-bezier(.2,.8,.2,1) infinite;
  box-shadow: 0 0 18px currentColor, 0 0 28px rgba(138,180,255,0.12);
  filter: drop-shadow(0 6px 18px rgba(138,180,255,0.15));
  mix-blend-mode: screen;
}
.staff-home-particles .particle:nth-child(odd) { 
  background: rgba(77, 220, 159, 1); 
  animation: floatAroundSlow 32s cubic-bezier(.2,.8,.2,1) infinite; 
  width: 10px; 
  height: 10px; 
  box-shadow: 0 0 20px rgba(77,220,159,0.9), 0 0 30px rgba(77,220,159,0.12);
}
.staff-home-particles .particle:nth-child(3n) { 
  background: rgba(255, 214, 69, 1); 
  animation: floatAroundMedium 34s cubic-bezier(.2,.8,.2,1) infinite; 
  width: 7px; 
  height: 7px; 
  box-shadow: 0 0 16px rgba(255,214,69,0.9), 0 0 26px rgba(255,214,69,0.12);
}
.staff-home-particles .particle:nth-child(5n) { 
  animation: spiralFloat 40s cubic-bezier(.2,.8,.2,1) infinite; 
  transform-origin: center;
}
.staff-home-particles .particle:nth-child(7n) { 
  animation: zigzagFloat 30s cubic-bezier(.2,.8,.2,1) infinite; 
  background: rgba(255, 255, 255, 0.9);
  box-shadow: 0 0 22px rgba(255,255,255,0.95), 0 0 36px rgba(255,255,255,0.12);
}

/* gentle shimmer to make particles twinkle */
.staff-home-particles .particle::after{
  content:'';
  position:absolute; inset:0; border-radius:50%;
  box-shadow: inset 0 0 6px rgba(255,255,255,0.35);
  opacity:0.9; mix-blend-mode: screen; pointer-events:none;
  animation: particleShimmer 6s ease-in-out infinite;
}
@keyframes particleShimmer{ 0%{ transform: scale(.9); opacity:.8 } 50%{ transform: scale(1.15); opacity:1 } 100%{ transform: scale(.9); opacity:.8 } }

@keyframes floatAround { 
  0% { 
    transform: translate(0, 100vh) scale(0) rotate(0deg); 
    opacity: 0; 
  } 
  5% { opacity: 1; }
  25% { 
    transform: translate(30vw, 75vh) scale(1) rotate(90deg); 
    opacity: 1; 
  }
  50% { 
    transform: translate(-20vw, 50vh) scale(1.2) rotate(180deg); 
    opacity: 1; 
  }
  75% { 
    transform: translate(40vw, 25vh) scale(1) rotate(270deg); 
    opacity: 1; 
  }
  95% { opacity: 1; }
  100% { 
    transform: translate(0, -10vh) scale(0.5) rotate(360deg); 
    opacity: 0; 
  } 
}

@keyframes floatAroundSlow { 
  0% { 
    transform: translate(-10vw, 110vh) scale(0) rotate(0deg); 
    opacity: 0; 
  } 
  10% { opacity: 1; }
  30% { 
    transform: translate(20vw, 80vh) scale(1.3) rotate(120deg); 
    opacity: 1; 
  }
  60% { 
    transform: translate(-30vw, 40vh) scale(0.8) rotate(240deg); 
    opacity: 1; 
  }
  90% { 
    transform: translate(50vw, 10vh) scale(1.5) rotate(320deg); 
    opacity: 1; 
  }
  100% { 
    transform: translate(0, -20vh) scale(0) rotate(360deg); 
    opacity: 0; 
  } 
}

@keyframes floatAroundMedium { 
  0% { 
    transform: translate(10vw, 100vh) scale(0) rotate(0deg); 
    opacity: 0; 
  } 
  8% { opacity: 1; }
  20% { 
    transform: translate(-25vw, 85vh) scale(1.1) rotate(60deg); 
    opacity: 1; 
  }
  40% { 
    transform: translate(35vw, 65vh) scale(0.9) rotate(150deg); 
    opacity: 1; 
  }
  65% { 
    transform: translate(-15vw, 35vh) scale(1.4) rotate(220deg); 
    opacity: 1; 
  }
  85% { 
    transform: translate(45vw, 15vh) scale(1) rotate(300deg); 
    opacity: 1; 
  }
  100% { 
    transform: translate(0, -15vh) scale(0.3) rotate(400deg); 
    opacity: 0; 
  } 
}

@keyframes spiralFloat {
  0% { 
    transform: translate(0, 100vh) scale(0) rotate(0deg); 
    opacity: 0; 
  }
  5% { opacity: 1; }
  25% { 
    transform: translate(20vw, 75vh) scale(1.2) rotate(180deg); 
    opacity: 1; 
  }
  50% { 
    transform: translate(-30vw, 50vh) scale(0.8) rotate(360deg); 
    opacity: 1; 
  }
  75% { 
    transform: translate(40vw, 25vh) scale(1.5) rotate(540deg); 
    opacity: 1; 
  }
  95% { opacity: 1; }
  100% { 
    transform: translate(0, -10vh) scale(0.5) rotate(720deg); 
    opacity: 0; 
  }
}

@keyframes zigzagFloat {
  0% { 
    transform: translate(50vw, 110vh) scale(0) rotate(0deg); 
    opacity: 0; 
  }
  10% { opacity: 1; }
  20% { 
    transform: translate(10vw, 85vh) scale(1) rotate(45deg); 
    opacity: 1; 
  }
  35% { 
    transform: translate(70vw, 70vh) scale(1.2) rotate(135deg); 
    opacity: 1; 
  }
  50% { 
    transform: translate(20vw, 50vh) scale(0.9) rotate(225deg); 
    opacity: 1; 
  }
  65% { 
    transform: translate(80vw, 30vh) scale(1.3) rotate(315deg); 
    opacity: 1; 
  }
  80% { 
    transform: translate(30vw, 15vh) scale(1) rotate(405deg); 
    opacity: 1; 
  }
  90% { opacity: 1; }
  100% { 
    transform: translate(60vw, -20vh) scale(0.4) rotate(450deg); 
    opacity: 0; 
  }
}

/* Glowing orbs */
.orb { position: fixed; border-radius: 50%; filter: blur(40px); opacity: 0.3; animation: orbFloat 20s ease-in-out infinite; pointer-events: none; z-index: -1; }
.orb1 { width: 300px; height: 300px; background: radial-gradient(circle, #7db1ff, transparent); top: 10%; left: 10%; animation-delay: 0s; }
.orb2 { width: 200px; height: 200px; background: radial-gradient(circle, #2bd4a7, transparent); bottom: 20%; right: 10%; animation-delay: 5s; }
.orb3 { width: 250px; height: 250px; background: radial-gradient(circle, #ffca28, transparent); top: 50%; left: 50%; animation-delay: 10s; }
@keyframes orbFloat { 0%, 100% { transform: translate(0, 0); } 33% { transform: translate(30px, -30px); } 66% { transform: translate(-20px, 20px); } }

/* Layout */
.content{ padding:22px; min-height:100vh; display:flex; flex-direction:column; gap:16px; }
.topbar{ display:flex; align-items:center; gap:10px; padding:10px 14px; background:rgba(25, 65, 155, 0.1); border-radius:14px; border:1px solid var(--border-color); box-shadow: var(--shadow); flex-wrap:wrap; backdrop-filter: blur(6px); }
.nav{ display:flex; gap:8px; flex-wrap:wrap; }
.nav a{ color:var(--white); text-decoration:none; padding:8px 14px; border-radius:10px; background:transparent; border:1px solid transparent; font-weight:600; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden; }
.nav a::before{ content:''; position:absolute; bottom:0; left:50%; width:0; height:2px; background:var(--accent); transform: translateX(-50%); transition: width 0.3s ease; }
.nav a:hover{ background:var(--glass); transform: translateY(-2px); text-shadow: 0 2px 8px rgba(138, 180, 255, 0.5); }
.nav a:hover::before{ width:80%; }
.nav a.active{ background:linear-gradient(135deg,#8ab4ff,#5f96ff); color:#fff; border-color:transparent; box-shadow: 0 4px 15px rgba(138, 180, 255, 0.4); animation: navPulse 2s ease-in-out infinite; }
@keyframes navPulse { 0%, 100% { box-shadow: 0 4px 15px rgba(138, 180, 255, 0.4); } 50% { box-shadow: 0 4px 20px rgba(138, 180, 255, 0.6); } }
.spacer{ flex:1; }
.pill{ padding:8px 12px; border-radius:999px; background:var(--glass); color:var(--white); border:1px solid var(--border-color); }
.btn{ all:unset; padding:10px 16px; border-radius:12px; background:linear-gradient(135deg,#8ab4ff,#5f96ff); color:#fff; font-weight:700; cursor:pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden; box-shadow: 0 5px 20px rgba(138, 180, 255, 0.4); transform-style: preserve-3d; }
.btn::before{ content:''; position:absolute; top:0; left:-100%; width:100%; height:100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); transition: left 0.5s ease; }
.btn::after{ content:''; position:absolute; top:50%; left:50%; width:0; height:0; border-radius:50%; background:rgba(255,255,255,0.4); transform: translate(-50%, -50%); transition: width 0.6s ease, height 0.6s ease; }
.btn:hover{ transform: translateY(-3px) rotateX(-5deg); box-shadow: 0 8px 30px rgba(138, 180, 255, 0.6); }
.btn:hover::before{ left: 100%; }
.btn:active::after{ width:300px; height:300px; }
.btn:active{ transform: translateY(-1px); }
.btn.secondary{ background: rgba(255, 255, 255, 0.1); color:var(--white); border:1px solid var(--border-color); backdrop-filter: blur(10px); }

.panel{ background: rgba(25, 65, 155, 0.1); border:2px solid var(--border-color); border-radius:16px; padding:24px; box-shadow: var(--shadow), inset 0 2px 0 rgba(255,255,255,0.15); backdrop-filter: blur(16px); position: relative; overflow: hidden; animation: panelGlow 4s ease-in-out infinite, shimmer 8s ease-in-out infinite; }

/* Use on panels that sit on very bright children to get a subtle darker border */
.panel.light-panel{ 
  background: linear-gradient(180deg,#ffffff,#fbfdff);
  /* local variable overrides so nested components that use var(--ink) display dark text */
  --ink: #0f172a;
  --muted: #6b7280;
  color: var(--ink);
  border-color: var(--border-weak);
  box-shadow: 0 10px 30px rgba(2,6,23,0.08), inset 0 1px 0 rgba(255,255,255,0.6);
}

/* Ensure labels/option items inside light panels show readable text */
.panel.light-panel label { color: var(--ink); }
.panel.light-panel .meta-note, .panel.light-panel .group-help { color: var(--muted); }
@keyframes panelGlow { 0%, 100% { box-shadow: var(--shadow), inset 0 1px 0 rgba(255,255,255,0.1); } 50% { box-shadow: var(--shadow), inset 0 1px 0 rgba(255,255,255,0.1), 0 0 30px rgba(118, 167, 255, 0.3); } }
.panel-header { display:flex; align-items:center; gap:12px; margin-bottom:10px; }
.panel-title { font-weight:700; font-size:18px; color:var(--white); text-shadow: 0 2px 6px rgba(0,0,0,0.3); }

.grid{ display:grid; grid-template-columns: repeat(12, 1fr); gap:16px; }
.g-12{ grid-column: span 12; }
.g-8{ grid-column: span 8; }
.g-4{ grid-column: span 4; }
.g-6{ grid-column: span 6; }

.h1{ font-size:32px; font-weight:900; letter-spacing:.5px; margin:6px 0 0; color:var(--white); text-shadow: var(--text-shadow); animation: textGlow 3s ease-in-out infinite alternate, textFloat 6s ease-in-out infinite; }
@keyframes textGlow { 0% { text-shadow: 0 2px 10px rgba(118, 167, 255, 0.5); } 100% { text-shadow: 0 2px 20px rgba(118, 167, 255, 0.8), 0 0 30px rgba(118, 167, 255, 0.4); } }
@keyframes textFloat { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-3px); } }
@keyframes shimmer { 0% { background-position: -200% center; } 100% { background-position: 200% center; } }
.muted{ color:var(--muted); font-weight:500; }
.subtitle{ color:#eaf4ff; font-weight:600; text-shadow: 0 1px 3px rgba(0,0,0,0.4); }

.stat-row{ display:grid; grid-template-columns: repeat(12,1fr); gap:14px; }
.stat-card { display:flex; align-items:center; gap:16px; background: rgba(25, 65, 155, 0.1); padding:18px; border-radius:16px; border: 2px solid var(--border-color); box-shadow: var(--shadow); backdrop-filter: blur(12px); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden; animation: cardFloat 8s ease-in-out infinite; animation-delay: calc(var(--card-index, 0) * 0.2s); }
.stat-card::before{ content:''; position:absolute; top:0; left:-100%; width:100%; height:100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent); transition: left 0.6s ease; }
.stat-card::after{ content:''; position:absolute; inset:0; background: radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(138, 180, 255, 0.15), transparent 50%); opacity:0; transition: opacity 0.3s ease; pointer-events: none; }
.stat-card:hover{ transform: translateY(-5px) scale(1.02); box-shadow: 0 12px 35px rgba(138, 180, 255, 0.35); border-color: var(--accent); }
.stat-card:hover::before{ left:100%; }
.stat-card:hover::after{ opacity:1; }
@keyframes cardFloat { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
.stat-card .icon-wrap { width:48px; height:48px; border-radius:12px; display:grid; place-items:center; flex-shrink:0; background: var(--c); color: var(--i); }

/* Achievement card styles for better readability */
.achievement-card p, .achievement-item p {
  color: #f0f8ff !important;
  font-weight: 500 !important;
  text-shadow: 0 1px 3px rgba(0,0,0,0.6) !important;
}

.achievement-card .muted, .achievement-item .muted {
  color: #eef6ff !important;
  font-weight: 600 !important;
  text-shadow: 0 1px 3px rgba(0,0,0,0.7) !important;
}

.achievement-status, .status-locked, .status-unlocked {
  color: #f8fcff !important;
  font-weight: 700 !important;
  text-shadow: 0 1px 3px rgba(0,0,0,0.8) !important;
}
.stat-num { font-size:28px; font-weight:800; line-height:1.1; color:var(--white); text-shadow: 0 2px 6px rgba(0,0,0,0.3); }
.stat-label { font-size:14px; color:#f5faff; font-weight:600; text-shadow: 0 1px 3px rgba(0,0,0,0.5); }

table{ width:100%; border-collapse:separate; border-spacing:0; }
th, td{ text-align:left; padding:12px 14px; font-size:14px; }
thead th{ position:sticky; top:0; background: linear-gradient(145deg, #2050b0, #153880); z-index:1; font-weight:700; color:var(--white); border-bottom:2px solid var(--border-color); backdrop-filter: blur(12px); text-shadow: var(--text-shadow); }
tbody tr{ background: rgba(255, 255, 255, 0.03); transition: all 0.3s ease; position: relative; }
tbody tr:nth-child(even){ background: rgba(255, 255, 255, 0.06); }
tbody tr:hover{ background: linear-gradient(90deg, rgba(118, 167, 255, 0.15), rgba(118, 167, 255, 0.08)) !important; transform: translateX(4px); box-shadow: 0 4px 12px rgba(118, 167, 255, 0.2); }
td { border-bottom:1px solid var(--border-color); color:var(--white); padding: 14px; transition: all 0.3s ease; }
.table-wrap{ overflow:auto; max-height:70vh; background: rgba(19, 59, 138, 0.4); border:1px solid var(--border-color); border-radius:12px; backdrop-filter: blur(10px); box-shadow: inset 0 0 20px rgba(255,255,255,0.05), var(--shadow); }
.right { text-align:right; }
.empty { background:var(--glass); border:1px dashed var(--border-color); color:var(--muted); padding:14px; border-radius:10px; font-size:14px; }

.badge{ display:inline-block; padding:4px 8px; border-radius:999px; font-size:12px; font-weight:700 }
.ok{ background: var(--stat-2-bg); color: var(--stat-2-color); }
.warn{ background: var(--stat-3-bg); color: var(--stat-3-color); }
.danger{ background: var(--stat-4-bg); color: var(--stat-4-color); }
.info{ background: #eef2ff; color: #3b82f6; }

@media (max-width: 980px){ .g-8, .g-4, .g-6 { grid-column: span 12; } }

/* ——— Gamified icon bubbles and badges ——— */
.bubble-actions{ display:grid; grid-template-columns: repeat(4, minmax(110px, 1fr)); gap:14px; align-items:stretch; }
@media (max-width: 720px){ .bubble-actions{ grid-template-columns: repeat(2, minmax(120px, 1fr)); } }
.bubble{ display:grid; justify-items:center; text-decoration:none; background: rgba(19, 59, 138, 0.1); border:1px solid var(--border-color); border-radius:16px; padding:14px; box-shadow: var(--shadow); transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); color: var(--white); backdrop-filter: blur(10px); position: relative; overflow: hidden; }
.bubble::before{ content:''; position:absolute; top:-50%; left:-50%; width:200%; height:200%; background: radial-gradient(circle, rgba(118, 167, 255, 0.3) 0%, transparent 70%); opacity:0; transition: opacity 0.3s ease; }
.bubble:hover{ transform: translateY(-4px) scale(1.02); box-shadow: 0 20px 40px rgba(118, 167, 255, 0.3), var(--shadow); }
.bubble:hover::before{ opacity:1; animation: pulse 1.5s ease-in-out infinite; }
@keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
.bubble .i{ width:76px; height:76px; border-radius:50%; display:grid; place-items:center; font-size:30px; font-weight:900; color:#fff; box-shadow: inset 0 0 0 3px #ffffff33; }
.bubble .i img{ width:42px; height:42px; object-fit:contain; filter: drop-shadow(0 1px 0 rgba(0,0,0,.05)); }
.bubble .t{ margin-top:10px; font-weight:800; color:var(--white); text-align:center; }

/* Disabled bubble styles */
.bubble.disabled-bubble {
  cursor: pointer !important;
  opacity: 0.6 !important;
  position: relative;
}
.bubble.disabled-bubble:hover {
  transform: none !important;
  box-shadow: var(--shadow) !important;
  background: rgba(19, 59, 138, 0.15) !important;
}
.bubble.disabled-bubble:hover::before {
  opacity: 0 !important;
  animation: none !important;
}
/* Enhanced tooltip for bubbles */
.bubble[title]:hover::after {
  content: attr(title);
  position: absolute;
  top: -35px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 6px 12px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 500;
  white-space: nowrap;
  z-index: 1000;
  pointer-events: none;
}

/* Bubble color helpers (inspired by the refs) */
.c-yellow{ background:#f59e0b; }
.c-blue{ background:#3b82f6; }
.c-orange{ background:#f97316; }
.c-green{ background:#10b981; }
.c-pink{ background:#ec4899; }
.c-purple{ background:#8b5cf6; }
.c-red{ background:#ef4444; }

/* Soft illustration chips */
.illus-circle{ width:90px; height:90px; border-radius:50%; background:var(--glass); display:grid; place-items:center; border:1px solid var(--border-color); }
.illus-circle .emoji{ font-size:36px; }
.illus-circle img{ width:48px; height:48px; object-fit:contain; }

/* ——— New iOS-like app shell for staff pages ——— */
.halo{ position:absolute; inset:-40px -10px -10px -10px; z-index:-1; pointer-events:none; }
.halo::before{ content:""; position:absolute; inset:0; background:
  radial-gradient(600px 320px at 20% 10%, #e9d5ff55, transparent 60%),
  radial-gradient(520px 280px at 90% 20%, #dbeafe66, transparent 60%),
  radial-gradient(540px 300px at 50% 80%, #dcfce766, transparent 60%);
  filter: blur(30px);
}

.seg-nav{ 
  display:flex; gap:10px; background:var(--panel-bg); padding:8px; 
  border:1px solid var(--border-color); border-radius:999px; 
  box-shadow: var(--shadow); backdrop-filter: blur(6px);
  position: relative;
  z-index: 100; /* Ensure navigation is above all background elements */
}
.seg-nav button{ 
  all: unset; /* Reset button styles */
  color:var(--white); padding:10px 14px; 
  border-radius:999px; font-weight:700;
  position: relative;
  z-index: 101; /* Buttons above navigation container */
  pointer-events: auto; /* Ensure buttons are always clickable */
  display: block;
  transition: all 0.2s ease;
  touch-action: manipulation; /* Prevent double-tap zoom on mobile */
  cursor: pointer;
  font-family: inherit;
  font-size: inherit;
  white-space: nowrap;
}
.seg-nav button:hover {
  background: var(--glass);
  transform: translateY(-1px);
}
.seg-nav button.active{ 
  background:linear-gradient(135deg,#7db1ff,#4f89ff); 
  color:#fff;
  box-shadow: 0 2px 8px rgba(79, 137, 255, 0.3);
}
.seg-nav button.disabled-nav-item {
  color: #9ca3af !important;
  cursor: pointer !important;
  opacity: 0.6 !important;
  background: transparent !important;
}
.seg-nav button.disabled-nav-item:hover {
  background: rgba(156, 163, 175, 0.1) !important;
  transform: none !important;
}
/* Tooltip enhancement for disabled items */
.seg-nav button[data-tooltip]:hover::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: -35px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 6px 12px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 500;
  white-space: nowrap;
  z-index: 1000;
  pointer-events: none;
}
/* Keep legacy anchor support for compatibility */
.seg-nav a{ 
  color:var(--white); text-decoration:none; padding:10px 14px; 
  border-radius:999px; font-weight:700;
  position: relative;
  z-index: 101;
  pointer-events: auto;
  display: block;
  transition: all 0.2s ease;
  touch-action: manipulation;
  cursor: pointer;
}
.seg-nav a:hover {
  background: var(--glass);
  transform: translateY(-1px);
}
.seg-nav a.active{ 
  background:linear-gradient(135deg,#7db1ff,#4f89ff); 
  color:#fff;
  box-shadow: 0 2px 8px rgba(79, 137, 255, 0.3);
}

.hero{ display:flex; gap:18px; align-items:center; flex-wrap:wrap; }
.hero .ring{ width:140px; height:140px; position:relative; display:grid; place-items:center; animation: pop .5s ease; }
.ring .ring-progress{ position:absolute; inset:0; border-radius:50%; background:conic-gradient(var(--accent) 0deg, #eef2ff 0deg); transition: background 1s ease; }
.ring .ring-hole{ position:absolute; inset:12px; background:rgba(25, 65, 155, 0.1); border-radius:50%; border:1px solid var(--border-color); box-shadow: inset 0 0 40px #00000007; backdrop-filter: blur(6px); }
.ring .ring-label{ position:relative; font-weight:900; font-size:28px; color: var(--white); }

/* Ensure avatar img fills the inner ring hole cleanly */
#ring-avatar{ position:absolute; top:12px; left:12px; right:12px; bottom:12px; width: calc(100% - 24px); height: calc(100% - 24px); border-radius:50%; object-fit:cover; display:block; box-shadow:0 4px 10px rgba(2,6,23,.12); }

@keyframes pop { 0%{ transform: scale(.9); opacity:.0;} 100%{ transform: scale(1); opacity:1; } }
@keyframes floaty { 0%{ transform: translateY(0);} 50%{ transform: translateY(-6px);} 100%{ transform: translateY(0);} }
.bounce{ animation: floaty 2.8s ease-in-out infinite; }

.tile-grid{ display:grid; grid-template-columns: repeat(12,1fr); gap:16px; }
.tile{ grid-column: span 6; background:rgba(25, 65, 155, 0.1); border:1px solid var(--border-color); border-radius:16px; padding:16px; box-shadow: var(--shadow); backdrop-filter: blur(6px); }
@media (max-width: 980px){ .tile{ grid-column: span 12; } }

.ach-grid{ display:grid; grid-template-columns: repeat(2,1fr); gap:12px; }
.ach{ display:flex; gap:12px; align-items:center; background:rgba(25, 65, 155, 0.1); border:1px solid var(--border-color); border-radius:14px; padding:12px; box-shadow: var(--shadow); backdrop-filter: blur(6px); }
.ach.locked{ opacity:.75; }
.ach .ico{ width:40px; height:40px; border-radius:12px; display:grid; place-items:center; font-size:20px; }
.ach .ico img{ width:26px; height:26px; object-fit:contain; }
.ach .txt{ line-height:1.1; }
.ach .name{ font-weight:800; color:var(--white); }
.ach .desc{ color:var(--muted); font-size:12px; }

.timeline{ display:grid; gap:10px; }
.t-row{ display:grid; grid-template-columns: 120px 1fr auto; gap:12px; align-items:center; padding:10px; background:rgba(25, 65, 155, 0.1); border:1px solid var(--border-color); border-radius:12px; box-shadow: var(--shadow); backdrop-filter: blur(6px); }

/* ===== Accessibility & modal fixes ===== */
/* Improve readability for light/white panels (modals / request forms) */
.modal-backdrop{ background: rgba(2,6,23,0.62) !important; backdrop-filter: blur(6px) !important; }
.modal, .dialog, .modal-content, .panel.light-panel { color: var(--ink); }

/* Ensure inputs inside light panels are visible (dark text on white inputs) */
.panel.light-panel input,
.panel.light-panel textarea,
.panel.light-panel select,
.panel.light-panel .form-control {
  background: #ffffff; /* solid white for high contrast */
  color: var(--ink) !important;
  border: 1px solid rgba(15,23,42,0.08) !important;
  padding: 12px 14px !important;
  border-radius: 10px !important;
  box-shadow: inset 0 1px 2px rgba(2,6,23,0.04);
  width: 100%;
}

.panel.light-panel input::placeholder,
.panel.light-panel textarea::placeholder { color: #94a3b8 !important; opacity:1 !important; }

/* Buttons inside light panels should be clearly visible */
.panel.light-panel .btn { background: linear-gradient(135deg,#6b6bff,#4f89ff) !important; color:#fff !important; box-shadow: 0 6px 18px rgba(79,137,255,0.18) !important; }
.panel.light-panel .btn.secondary { background:#eef2ff !important; color:#0f172a !important; border:1px solid rgba(15,23,42,0.06) !important; }

/* Make statistic numbers readable on white/light panels */
.panel.light-panel .stat-num,
.panel.light-panel .stat-label { color: var(--ink) !important; text-shadow: none !important; }

/* Fallback for any modal-like container that uses white bg */
.modal-content input, .modal-content textarea, .modal-content select { background: #fff; color: #0f172a; border: 1px solid rgba(15,23,42,0.08); }

/* Reduce background animation intensity when modal is open to avoid washout */
body.modal-open .wave, body.modal-open .m1, body.modal-open .m2, body.modal-open .m3 { opacity: 0.4; filter: blur(12px) saturate(90%); }

/* Also dim the main background and orbs to reduce washout further */
body.modal-open .bg { filter: brightness(0.6) contrast(0.85) saturate(80%); }
body.modal-open .orb, body.modal-open .orb1, body.modal-open .orb2, body.modal-open .orb3 { opacity: 0.25; filter: blur(8px) saturate(70%); }

/* Force readable colors for modal form controls, including browser-specific date input parts */
.modal input, .modal textarea, .modal select {
  color: #0f172a !important;
  background: #ffffff !important;
}

/* WebKit date/time input internals */
.modal input[type="date"]::-webkit-datetime-edit,
.modal input[type="date"]::-webkit-datetime-edit-text,
.modal input[type="date"]::-webkit-datetime-edit-month-field,
.modal input[type="date"]::-webkit-datetime-edit-day-field,
.modal input[type="date"]::-webkit-datetime-edit-year-field {
  color: #0f172a !important;
}

/* Slightly stronger backdrop when modal is open to ensure contrast */
.modal-backdrop, .modal { background-color: rgba(2,6,23,0.72) !important; }

/* Modal-scoped variable overrides: ensure all modal content uses dark ink and readable muted color */
.modal, .dialog, .modal-content {
  --ink: #0f172a; /* primary text */
  --muted: #6b7280; /* secondary/muted text */
  color: var(--ink) !important;
}

/* Force readable muted text and small hints inside modals */
.modal .muted, .modal small, .modal .meta-note, .modal .group-help {
  color: var(--muted) !important;
}

/* Strong placeholder contrast inside modals */
.modal input::placeholder, .modal textarea::placeholder, .modal select::placeholder {
  color: #94a3b8 !important;
  opacity: 1 !important;
}

/* Ensure close button and labels use dark ink on white modal */
.modal .close, .modal label, .modal .form-group label { color: var(--ink) !important; }

/* Admin Portal Button Styling - Available across all staff pages */
.admin-portal-btn {
  background: linear-gradient(135deg, #4338ca, #3b82f6) !important;
  color: white !important;
  border: 1px solid rgba(67, 56, 202, 0.3) !important;
  box-shadow: 0 4px 12px rgba(67, 56, 202, 0.3) !important;
  transition: all 0.2s ease !important;
  font-weight: 600 !important;
  position: relative;
  overflow: hidden;
}

.admin-portal-btn:hover {
  background: linear-gradient(135deg, #3730a3, #2563eb) !important;
  box-shadow: 0 6px 20px rgba(67, 56, 202, 0.4) !important;
  transform: translateY(-1px) !important;
}

.admin-portal-btn:active {
  transform: translateY(0) !important;
}

/* Add subtle glow effect */
.admin-portal-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left 0.5s;
}

.admin-portal-btn:hover::before {
  left: 100%;
}


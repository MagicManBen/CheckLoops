<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>UNO R4 – Online Test</title>
<style>
body{font-family:system-ui;margin:24px;max-width:520px}
label{display:block;font-size:12px;color:#475569;margin-bottom:6px;text-transform:uppercase}
input{width:100%;padding:10px;border:1px solid #cbd5e1;border-radius:10px}
button{padding:10px 14px;border:0;border-radius:10px;background:#2563eb;color:#fff;font-weight:600;margin-top:10px;cursor:pointer}
pre{background:#0b1020;color:#a7f3d0;padding:12px;border-radius:10px;min-height:120px;white-space:pre-wrap}
</style>
</head>
<body>
<h2>UNO R4 – Online Test</h2>
<label>Device IP</label>
<input id="ip" placeholder="e.g. 192.168.1.130" />
<button id="status">GET /status</button>
<button id="diag">GET /diag</button>
<button id="tick">POST /tick</button>
<pre id="log">Enter IP and click a button.</pre>
<script>
const ip=document.getElementById('ip'), log=document.getElementById('log');
function base(){ const v=(ip.value||"").trim(); if(!v){ alert("Enter IP"); return null; } return `http://${v}`; }
function add(s){ log.textContent += `\n${s}`; log.scrollTop=log.scrollHeight; }
async function doReq(m,p,body){
  const b=base(); if(!b) return;
  const url=b+p, t0=performance.now();
  try{
    const opts={method:m,cache:"no-store"};
    if(m==="POST"){ opts.headers={"Content-Type":"application/json"}; opts.body=body||""; }
    const r=await fetch(url,opts); const txt=await r.text();
    add(`${m} ${p} -> HTTP ${r.status} (${Math.round(performance.now()-t0)}ms)\n${txt}`);
  }catch(e){ add(`${m} ${p} FAILED: ${e}`); }
}
document.getElementById('status').onclick = ()=>doReq("GET","/status");
document.getElementById('diag').onclick   = ()=>doReq("GET","/diag");
document.getElementById('tick').onclick   = ()=>doReq("POST","/tick");
</script>
</body>
</html>
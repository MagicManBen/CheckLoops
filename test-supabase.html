<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Supabase Import</title>
  <script src="config.js"></script>
</head>
<body>
  <h1>Supabase Import Test</h1>
  <div id="result">Testing...</div>

  <script type="module">
    document.getElementById('result').textContent = 'Starting test...';
    
    try {
      // Import Supabase client
      const { createClient } = await import('https://esm.sh/@supabase/supabase-js@2');
      document.getElementById('result').textContent += '\nSuccessfully imported Supabase library';
      
      // Create client
      const supabase = createClient(CONFIG.SUPABASE_URL, CONFIG.SUPABASE_ANON_KEY, {
        auth: { 
          persistSession: true, 
          autoRefreshToken: true, 
          detectSessionInUrl: true, 
          flowType: 'pkce' 
        }
      });
      
      document.getElementById('result').textContent += '\nSuccessfully created Supabase client';
      
      // Test getSession
      const { data, error } = await supabase.auth.getSession();
      if (error) {
        document.getElementById('result').textContent += `\nError getting session: ${error.message}`;
      } else {
        document.getElementById('result').textContent += `\nSession check successful. Has session: ${!!data.session}`;
      }
    } catch (err) {
      document.getElementById('result').textContent += `\nError: ${err.message}`;
      console.error('Test failed:', err);
    }
  </script>
</body>
</html>

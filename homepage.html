<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="CheckLoop - The complete compliance, training and checks solution for GP Practices. CQC inspection-ready tools in one place." />
  <meta name="keywords" content="GP Practice, CQC, Compliance, Training Matrix, Health Checks, Practice Management" />
  <meta name="theme-color" content="#0b4fb3" />
  <title>CheckLoop — Compliance, Training and Checks for GP Practices</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="config.js"></script>
  <script>
    // MAGIC LINK REDIRECT HANDLER - MUST BE AT TOP OF PAGE
    (function() {
      // Check if this is a magic link callback
      const urlParams = new URLSearchParams(window.location.search);
      const hashParams = new URLSearchParams(window.location.hash.substring(1));

      // Handle various Supabase callback patterns
      if (urlParams.has('code') ||
          urlParams.has('token') ||
          hashParams.has('access_token') ||
          hashParams.has('confirmation_token')) {

        // This is an invitation/magic link - redirect to password setup
        console.log('Magic link detected, redirecting to password setup...');

        // Preserve all parameters for the password page
        const currentUrl = window.location.href;
        const redirectUrl = currentUrl.replace(/^[^?#]*/, '/simple-set-password.html');

        window.location.replace(redirectUrl);
      }
    })();
  </script>
  <style>
    :root{
      /* Core palette - enhanced with additional tones */
      --bg1:#0b4fb3; --bg2:#062b6f; 
      --bg1-light:#2b6ecc; --bg2-light:#1d4790;
      --glass:#ffffff16; --glass-2:#ffffff1e;
      --white:#e9f2ff; --muted:#c0d1ef; --ink:#eaf1ff;
      --accent:#76a7ff; --accent-2:#5f96ff; --accent-3:#3474ff;
      --success:#2bd4a7; --success-2:#20a684; --success-dim:#2bd4a730;
      --danger:#ff6b6b; --danger-2:#e55757; --danger-dim:#ff6b6b30;
      --warning:#ffca28; --warning-2:#eab71e; --warning-dim:#ffca2830;
      
      /* Effects and shapes */
      --shadow: 0 16px 40px rgba(6,35,90,.4);
      --shadow-sm: 0 8px 20px rgba(6,35,90,.25);
      --round:18px; --round-sm:12px;
      --panel-bg: linear-gradient(145deg, #133b8a, #0c275e);
      --border-color: #ffffff1f; --border-accent: #ffffff33;
      
      /* Animation speeds */
      --speed-fast: 0.2s; --speed-normal: 0.3s; --speed-slow: 0.5s;
      
      /* Fonts */
      --font-heading: 'Plus Jakarta Sans', 'Inter', sans-serif;
      --font-body: 'Inter', system-ui, -apple-system, sans-serif;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; 
      font-family:var(--font-body);
      color:var(--ink); 
      background:#0b3a86; 
      overflow-x:hidden;
      scroll-behavior: smooth;
      font-feature-settings: "kern", "liga";
      text-rendering: optimizeLegibility;
    }

    /* Enhanced animated background with multiple layers */
    .bg{
      position:fixed; 
      inset:0; 
      z-index:-1; 
      overflow:hidden; 
      background: 
        radial-gradient(1400px 800px at 15% -5%, #6aa0ff38, transparent),
        radial-gradient(1000px 700px at 90% 10%, #3566ff33, transparent),
        radial-gradient(800px 800px at 50% 60%, #2bd4a720, transparent),
        linear-gradient(180deg, #0e3f93 0%, #082a69 100%);
      transition: opacity 0.5s ease;
    }
    .wave{ 
      position:absolute; 
      width:160%; 
      height:160%; 
      left:-30%; 
      top:-30%; 
      background: conic-gradient(from 180deg at 50% 50%, #2c63ff22, #143a9622, #2c63ff22); 
      filter: blur(60px); 
      animation: drift 22s ease-in-out infinite alternate; 
      transform-origin: 50% 50%; 
    }
    .wave2{ 
      animation-duration: 28s; 
      mix-blend-mode: screen; 
      background: conic-gradient(from 270deg at 50% 50%, #2bd4a722, #143a9622, #2bd4a722);
    }
    .wave3{
      animation-duration: 32s;
      animation-direction: alternate-reverse;
      mix-blend-mode: screen;
      background: conic-gradient(from 90deg at 50% 50%, #ffca2822, #143a9622, #ffca2822);
      opacity: 0.8;
    }
    @keyframes drift{ 
      0%{ transform: rotate(0deg) scale(1.0); } 
      100%{ transform: rotate(25deg) scale(1.08); } 
    }

    /* Enhanced animated mesh and orbs for depth */
    .mesh{ 
      position: fixed; 
      inset: -20% -20% -20% -20%; 
      z-index:-1; 
      pointer-events:none; 
      filter: blur(40px) saturate(120%); 
      opacity:.65; 
    }
    .m1, .m2, .m3, .m4 { 
      position:absolute; 
      border-radius:50%; 
      transition: transform 1s ease-out;
    }
    .m1{ 
      width:60vw; 
      height:60vw; 
      left:-10%; 
      top:-10%; 
      background:radial-gradient(closest-side, #4f89ff65, transparent 70%); 
      animation: blobA 26s ease-in-out infinite alternate; 
    }
    .m2{ 
      width:45vw; 
      height:45vw; 
      right:-8%; 
      top:10%; 
      background:radial-gradient(closest-side, #2bd4a755, transparent 70%); 
      animation: blobB 32s ease-in-out infinite alternate; 
    }
    .m3{ 
      width:60vw; 
      height:60vw; 
      left:20%; 
      bottom:-15%; 
      background:radial-gradient(closest-side, #ffca2850, transparent 70%); 
      animation: blobC 38s ease-in-out infinite alternate; 
    }
    .m4{
      width:80vw;
      height:80vw;
      right:-20%;
      bottom:-30%;
      background:radial-gradient(closest-side, #3f78ff40, transparent 75%);
      animation: blobD 42s ease-in-out infinite alternate;
    }
    @keyframes blobA{ from{ transform: translate(0,0) rotate(0deg); } to{ transform: translate(6%,4%) rotate(30deg); } }
    @keyframes blobB{ from{ transform: translate(0,0) rotate(0deg); } to{ transform: translate(-4%,6%) rotate(-25deg); } }
    @keyframes blobC{ from{ transform: translate(0,0) rotate(0deg); } to{ transform: translate(4%,-3%) rotate(18deg); } }
    @keyframes blobD{ from{ transform: translate(0,0) rotate(0deg); } to{ transform: translate(-3%,-5%) rotate(-15deg); } }

    /* Enhanced header with animations */
    .header { 
      position: fixed; 
      top: 0; 
      left: 0; 
      right: 0; 
      z-index: 120; 
      padding: 16px 24px; 
      backdrop-filter: blur(10px); 
      -webkit-backdrop-filter: blur(10px);
      background: rgba(11, 58, 134, 0.6); 
      border-bottom: 1px solid var(--border-color); 
      transition: all var(--speed-normal) ease; 
    }
    .header.shrink{ 
      background: rgba(10, 46, 109, 0.85); 
      transform: translateY(-2px); 
      box-shadow: var(--shadow-sm);
      padding: 12px 24px;
    }
    .nav { 
      display: flex; 
      justify-content: space-between; 
      align-items: center; 
      max-width: 1300px; 
      margin: 0 auto; 
    }
    .brand{ 
      display: flex; 
      align-items: center; 
      gap: 14px; 
      transform: translateY(0);
      transition: transform var(--speed-fast) ease;
    }
    .brand:hover {
      transform: translateY(-2px);
    }
    .brand .logo{ 
      width: 42px; 
      height: 42px; 
      border-radius: 12px; 
      background: linear-gradient(135deg, #9ec1ff, #3f78ff); 
      box-shadow: inset 0 0 0 2px rgba(255, 255, 255, 0.35), 0 5px 15px rgba(63, 120, 255, 0.3); 
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }
    .brand .logo::before {
      content: "";
      position: absolute;
      width: 150%;
      height: 150%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transform: translateX(-150%);
    }
    .brand:hover .logo::before {
      transform: translateX(150%);
      transition: transform 1s ease;
    }
    .brand .t{ 
      font-size: 22px; 
      font-weight: 800; 
      letter-spacing: -0.01em;
      font-family: var(--font-heading);
      background: linear-gradient(135deg, var(--white), var(--accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .nav-links{ 
      display: flex; 
      gap: 20px; 
      align-items: center; 
    }
    .nav-links a{ 
      color: var(--white); 
      text-decoration: none; 
      opacity: 0.9; 
      font-weight: 600; 
      position: relative;
      padding: 5px 0;
      transition: all var(--speed-fast) ease;
    }
    .nav-links a::after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: 0;
      left: 0;
      background: var(--accent);
      transition: width var(--speed-fast) ease;
    }
    .nav-links a:hover{ 
      opacity: 1;
      color: var(--white);
    }
    .nav-links a:hover::after,
    .nav-links a.active::after {
      width: 100%;
    }
    .nav-links a.active {
      opacity: 1;
      color: var(--white);
      font-weight: 700;
    }
    .auth-buttons{ 
      display: flex; 
      gap: 12px; 
    }
    .btn{ 
      all: unset; 
      padding: 10px 20px; 
      border-radius: 14px; 
      font-weight: 700; 
      cursor: pointer; 
      transition: all var(--speed-fast) ease; 
      text-align: center; 
      position: relative;
      overflow: hidden;
    }
    .btn.primary{ 
      background: linear-gradient(135deg, #7db1ff, #4f89ff); 
      color: #fff; 
      box-shadow: 0 4px 15px rgba(76, 136, 255, 0.3);
    }
    .btn.primary::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #76a7ff, #3474ff);
      opacity: 0;
      transition: opacity var(--speed-fast) ease;
    }
    .btn.primary:hover::before {
      opacity: 1;
    }
    .btn.primary span {
      position: relative;
      z-index: 1;
    }
    .btn.secondary{ 
      background: var(--glass); 
      border: 1px solid var(--border-color); 
      color: var(--white); 
    }
    .btn.secondary:hover{ 
      background: var(--glass-2);
      border-color: var(--border-accent);
    }
    .btn:hover{ 
      transform: translateY(-2px); 
      box-shadow: 0 8px 20px rgba(6, 43, 111, 0.4); 
    }
    .btn:active {
      transform: translateY(0);
    }

    /* Main content with enhanced styling */
    .main{ 
      padding-top: 88px; 
      min-height: 100vh; 
    }
    .progress-wrap{ 
      position: fixed; 
      top: 0; 
      left: 0; 
      right: 0; 
      height: 3px; 
      z-index: 140; 
      background: transparent; 
    }
    .progress{ 
      height: 100%; 
      width: 0%; 
      background: linear-gradient(90deg, #7db1ff, #2bd4a7, #ffca28); 
      box-shadow: 0 0 15px rgba(125, 177, 255, 0.6); 
      transition: width 0.12s ease; 
      border-radius: 0 3px 3px 0;
    }
    
    /* Enhanced CQC Ready banner with animations */
    .cqc{ 
      max-width: 1200px; 
      margin: 92px auto 0; 
      padding: 20px; 
      position: relative; 
    }
    .cqc .card{ 
      position: relative; 
      overflow: hidden; 
      border-radius: var(--round); 
      border: 1px solid var(--border-color); 
      background: linear-gradient(145deg, #123987, #0b2d6b); 
      box-shadow: var(--shadow); 
      padding: 28px; 
      display: flex; 
      gap: 24px; 
      align-items: center; 
      transform: translateY(0);
      transition: transform var(--speed-normal) ease, box-shadow var(--speed-normal) ease;
    }
    .cqc .card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow), 0 10px 30px rgba(43, 212, 167, 0.15);
    }
    .cqc .glow{ 
      position: absolute; 
      inset: -2px; 
      border-radius: calc(var(--round) + 2px); 
      background: conic-gradient(from 0deg, #7db1ff55, #2bd4a755, #ffca2855, #7db1ff55); 
      filter: blur(14px); 
      opacity: 0.4; 
      animation: rotate 8s linear infinite; 
    }
    @keyframes rotate{ to{ transform: rotate(360deg); } }
    .cqc h2{ 
      margin: 0; 
      color: #fff; 
      font-size: clamp(1.3rem, 2.2vw, 1.8rem); 
      font-weight: 900; 
      letter-spacing: -0.01em; 
      font-family: var(--font-heading);
      line-height: 1.4;
    }
    .cqc .sub{ 
      color: #cfe1ff; 
      font-weight: 600; 
      margin-top: 12px;
      opacity: 0.95;
    }
    .badge{ 
      display: inline-flex; 
      align-items: center; 
      gap: 6px; 
      padding: 8px 14px; 
      border-radius: 999px; 
      background: rgba(255, 255, 255, 0.12); 
      border: 1px solid rgba(255, 255, 255, 0.2); 
      color: #fff; 
      font-weight: 800; 
      letter-spacing: 0.08em; 
      font-size: 0.85rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      margin-bottom: 15px;
    }
    .shield{ 
      width: 20px; 
      height: 20px; 
      display: inline-block; 
      background: radial-gradient(circle at 30% 30%, #fff, #7db1ff); 
      border-radius: 5px; 
      box-shadow: inset 0 0 0 2px rgba(255, 255, 255, 0.4); 
      transform: rotate(5deg);
      position: relative;
      overflow: hidden;
    }
    .shield::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, transparent 0%, rgba(255, 255, 255, 0.4) 50%, transparent 100%);
      animation: shimmer 2s infinite;
    }
    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }
    .cqc-wrap{ 
      display: flex; 
      gap: 24px; 
      align-items: center; 
      justify-content: space-between; 
      flex-wrap: wrap; 
    }
    .cqc-points{ 
      display: flex; 
      gap: 10px; 
      flex-wrap: wrap; 
      margin-top: 15px;
    }
    .cqc-points .pill{ 
      background: #0d3c8f; 
      border: 1px solid rgba(255, 255, 255, 0.13); 
      transition: all var(--speed-fast) ease;
    }
    .cqc-points .pill:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
      background: #104aad;
      border-color: rgba(255, 255, 255, 0.2);
    }
    .cqc-meter{ 
      position: relative; 
      width: 140px; 
      height: 140px; 
      filter: drop-shadow(0 10px 15px rgba(0, 0, 0, 0.15));
    }
    .meter-ring{ 
      position: absolute; 
      inset: 0; 
      border-radius: 50%; 
      background: conic-gradient(#7db1ff var(--p,0%), rgba(255, 255, 255, 0.13) 0); 
      box-shadow: inset 0 0 0 10px #0a2a66;
      transform: rotate(-90deg);
    }
    .meter-hole{ 
      position: absolute; 
      inset: 16px; 
      border-radius: 50%; 
      background: #0a2a66; 
      display: grid; 
      place-items: center; 
      color: var(--white); 
      font-weight: 900; 
      font-size: 26px; 
      letter-spacing: 0; 
      box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.2);
    }
    .meter-pulse {
      position: absolute;
      inset: -10px;
      border-radius: 50%;
      border: 2px solid rgba(125, 177, 255, 0.5);
      opacity: 0;
      transform: scale(0.8);
      animation: pulse 2s ease-out infinite;
    }
    @keyframes pulse {
      0% { opacity: 0.8; transform: scale(0.8); }
      100% { opacity: 0; transform: scale(1.1); }
    }

    /* Enhanced hero section with animations */
    .hero{ 
      text-align: center; 
      padding: 94px 20px 48px; 
      max-width: 1200px; 
      margin: 0 auto; 
      position: relative; 
    }
    .eyebrow{ 
      color: var(--accent); 
      font-weight: 700; 
      letter-spacing: 0.18em; 
      font-size: 14px; 
      text-transform: uppercase; 
      opacity: 0;
      animation: fadeSlideUp 1s forwards 0.3s;
      position: relative;
    }
    .hero h1{ 
      font-size: clamp(2.4rem, 5.4vw, 4.4rem); 
      font-weight: 900; 
      margin: 14px 0 16px; 
      background: linear-gradient(135deg, var(--white), var(--accent)); 
      -webkit-background-clip: text; 
      -webkit-text-fill-color: transparent; 
      background-clip: text; 
      animation: hue 8s ease-in-out infinite alternate, fadeSlideUp 1s forwards 0.5s; 
      opacity: 0;
      transform: translateY(20px);
      line-height: 1.2;
      font-family: var(--font-heading);
      letter-spacing: -0.02em;
    }
    @keyframes fadeSlideUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    @keyframes hue{ 
      from{ filter: hue-rotate(0deg) } 
      to{ filter: hue-rotate(15deg) } 
    }
    .hero p{ 
      font-size: 1.2rem; 
      color: var(--muted); 
      margin: 0 auto 25px; 
      max-width: 780px; 
      line-height: 1.7; 
      opacity: 0;
      animation: fadeSlideUp 1s forwards 0.7s;
      transform: translateY(20px);
    }
    .hero-ctas{ 
      display: flex; 
      gap: 14px; 
      align-items: center; 
      justify-content: center; 
      margin-top: 15px; 
      flex-wrap: wrap; 
      opacity: 0;
      animation: fadeSlideUp 1s forwards 0.9s;
      transform: translateY(20px);
    }
    .subhint{ 
      color: var(--muted); 
      font-size: 14px; 
      margin-top: 15px;
      opacity: 0;
      animation: fadeSlideUp 1s forwards 1.1s;
      transform: translateY(20px);
    }
    
    /* Enhanced orbiting elements with additional dots */
    .orbit{ 
      position: absolute; 
      left: 50%; 
      top: 40%; 
      width: 400px; 
      height: 400px; 
      margin: -200px 0 0 -200px; 
      pointer-events: none; 
      opacity: 0.6;
      animation: fadeIn 2s forwards 1.2s;
    }
    @keyframes fadeIn {
      to { opacity: 0.6; }
    }
    .orbit .dot{ 
      position: absolute; 
      width: 10px; 
      height: 10px; 
      border-radius: 50%; 
      background: var(--accent); 
      box-shadow: 0 0 15px var(--accent-2);
    }
    .orbit .dot::after {
      content: "";
      position: absolute;
      inset: -4px;
      border-radius: 50%;
      background: rgba(118, 167, 255, 0.2);
      opacity: 0.5;
      animation: pulseDot 3s infinite;
    }
    @keyframes pulseDot {
      0%, 100% { transform: scale(1); opacity: 0.5; }
      50% { transform: scale(1.5); opacity: 0.2; }
    }
    .orbit:before, .orbit:after{ 
      content: ""; 
      position: absolute; 
      inset: 0; 
      border-radius: 50%; 
      border: 1px dashed rgba(255, 255, 255, 0.2);
    }
    .orbit:after {
      inset: 30px;
      border: 1px dashed rgba(255, 255, 255, 0.15);
    }
    .o1{ animation: spin 18s linear infinite; }
    .o2{ animation: spin 28s linear infinite reverse; transform: scale(0.75); }
    .o3{ animation: spin 22s linear infinite; transform: scale(0.6); opacity: 0.7; }
    @keyframes spin{ 
      from{ transform: rotate(0deg) } 
      to{ transform: rotate(360deg) } 
    }
    .o1 .dot{ left: 50%; top: -5px; }
    .o1 .dot.d2{ right: -5px; top: 50%; left: auto; background: var(--success); box-shadow: 0 0 15px var(--success-2); }
    .o1 .dot.d2::after { background: rgba(43, 212, 167, 0.2); }
    .o2 .dot{ right: 12%; bottom: -5px; }
    .o2 .dot.d2{ left: -5px; top: 40%; right: auto; background: var(--warning); box-shadow: 0 0 15px var(--warning-2); }
    .o2 .dot.d2::after { background: rgba(255, 202, 40, 0.2); }
    .o3 .dot{ left: 30%; top: -5px; background: var(--accent-3); }
    .o3 .dot.d2{ right: 20%; bottom: -5px; left: auto; top: auto; background: var(--success); }

    /* Enhanced feature grid with interactive cards */
    .features{ 
      display: grid; 
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
      gap: 24px; 
      padding: 40px 20px; 
      max-width: 1300px; 
      margin: 0 auto; 
      perspective: 1000px; 
    }
    .card{ 
      background: var(--panel-bg); 
      border: 1px solid var(--border-color); 
      border-radius: var(--round); 
      box-shadow: var(--shadow); 
      padding: 30px; 
      color: var(--white); 
      animation: fadeInUp 0.6s ease forwards; 
      opacity: 0; 
      transform: translateY(20px); 
      will-change: transform; 
      transition: all var(--speed-normal) ease; 
      position: relative;
      overflow: hidden;
    }
    .card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(145deg, rgba(19, 61, 144, 0.6), rgba(12, 39, 94, 0.6));
      opacity: 0;
      transition: opacity var(--speed-normal) ease;
    }
    .card:hover{ 
      transform: translateY(-8px) scale(1.02); 
      box-shadow: var(--shadow), 0 10px 25px rgba(19, 59, 138, 0.3);
      border-color: rgba(255, 255, 255, 0.25);
    }
    .card:hover::before {
      opacity: 1;
    }
    .card > * {
      position: relative;
      z-index: 1;
    }
    .card:nth-child(1){ animation-delay: 0.1s }
    .card:nth-child(2){ animation-delay: 0.2s }
    .card:nth-child(3){ animation-delay: 0.3s }
    .card:nth-child(4){ animation-delay: 0.4s }
    .card:nth-child(5){ animation-delay: 0.5s }
    .card:nth-child(6){ animation-delay: 0.6s }
    @keyframes fadeInUp{ 
      to { opacity: 1; transform: translateY(0); } 
    }
    .icon{ 
      width: 56px; 
      height: 56px; 
      border-radius: 14px; 
      display: grid; 
      place-items: center; 
      background: linear-gradient(135deg, var(--accent), var(--accent-3)); 
      color: #fff; 
      font-weight: 900; 
      font-size: 24px;
      margin-bottom: 5px;
      position: relative;
      overflow: hidden;
      box-shadow: 0 8px 20px rgba(76, 136, 255, 0.25);
      transition: transform var(--speed-fast) ease;
    }
    .card:hover .icon {
      transform: scale(1.1) translateY(-3px);
    }
    .icon::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.25), transparent);
      transform: translateX(-100%);
    }
    .card:hover .icon::after {
      transform: translateX(100%);
      transition: transform 0.8s ease;
    }
    .card:nth-child(2) .icon{ background: linear-gradient(135deg, #76a7ff, #5263ff); }
    .card:nth-child(3) .icon{ background: linear-gradient(135deg, #ff6b6b, #ff9a76); }
    .card:nth-child(4) .icon{ background: linear-gradient(135deg, #7b88ff, #5263ff); }
    .card:nth-child(5) .icon{ background: linear-gradient(135deg, #ffca28, #ffae00); }
    .card:nth-child(6) .icon{ background: linear-gradient(135deg, #2bd4a7, #18a980); }
    
    .card h3{ 
      margin: 16px 0 10px; 
      font-size: 20px; 
      font-weight: 800; 
      color: var(--white);
      font-family: var(--font-heading);
      position: relative;
      padding-bottom: 10px;
    }
    .card h3::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      width: 40px;
      height: 3px;
      background: var(--accent);
      border-radius: 3px;
      transition: width var(--speed-normal) ease;
    }
    .card:hover h3::after {
      width: 70px;
    }
    .card:nth-child(2) h3::after { background: #5263ff; }
    .card:nth-child(3) h3::after { background: #ff6b6b; }
    .card:nth-child(4) h3::after { background: #7b88ff; }
    .card:nth-child(5) h3::after { background: #ffca28; }
    .card:nth-child(6) h3::after { background: #2bd4a7; }
    
    .card p{ 
      margin: 0; 
      color: var(--muted); 
      line-height: 1.65;
    }
    .list{ 
      margin: 16px 0 0; 
      padding: 0; 
      list-style: none; 
      color: #d7e6ff; 
      font-size: 14px; 
    }
    .list li{ 
      margin: 8px 0; 
      opacity: 0.95;
      position: relative;
      padding-left: 20px;
      transition: transform var(--speed-fast) ease;
    }
    .list li::before {
      content: "→";
      position: absolute;
      left: 0;
      color: var(--accent);
      transition: transform var(--speed-fast) ease;
    }
    .card:hover .list li:hover {
      transform: translateX(3px);
    }
    .card:hover .list li:hover::before {
      transform: translateX(3px);
    }

    /* Enhanced "How it works" section with step indicators */
    .how{ 
      padding: 40px 20px 60px; 
      max-width: 1200px; 
      margin: 20px auto 0; 
      position: relative;
    }
    .how::before {
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      width: 200px;
      height: 200px;
      background: radial-gradient(circle, rgba(118, 167, 255, 0.1), transparent 70%);
      transform: translate(-50%, -50%);
      border-radius: 50%;
      z-index: -1;
      filter: blur(40px);
    }
    .how h2{ 
      text-align: center; 
      margin: 0 0 15px; 
      color: var(--white); 
      font-size: 32px;
      font-weight: 800;
      font-family: var(--font-heading);
      position: relative;
      display: inline-block;
      left: 50%;
      transform: translateX(-50%);
      padding-bottom: 15px;
    }
    .how h2::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 3px;
      background: var(--accent);
      border-radius: 3px;
    }
    .steps{ 
      display: grid; 
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); 
      gap: 24px; 
      margin-top: 30px;
      position: relative;
    }
    .step{ 
      background: var(--glass); 
      border: 1px solid var(--border-color); 
      border-radius: var(--round); 
      padding: 25px;
      position: relative;
      z-index: 1;
      transition: all var(--speed-normal) ease;
    }
    .step:hover {
      transform: translateY(-5px);
      background: var(--glass-2);
      border-color: var(--border-accent);
      box-shadow: var(--shadow-sm);
    }
    .step-number {
      position: absolute;
      top: -15px;
      left: 20px;
      width: 30px;
      height: 30px;
      background: var(--accent);
      color: #fff;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 14px;
      box-shadow: 0 4px 10px rgba(76, 136, 255, 0.3);
      transition: transform var(--speed-fast) ease;
    }
    .step:hover .step-number {
      transform: scale(1.1);
    }
    .step strong{ 
      color: #fff;
      font-size: 18px;
      font-weight: 700;
      display: block;
      margin-bottom: 8px;
      font-family: var(--font-heading);
    }
    .step p{ 
      color: var(--muted); 
      margin: 6px 0 0; 
      font-size: 15px; 
      line-height: 1.6;
    }
    .steps::after {
      content: "";
      position: absolute;
      top: 35px;
      left: 10%;
      right: 10%;
      height: 2px;
      background: linear-gradient(90deg, 
        transparent 0%, 
        rgba(118, 167, 255, 0.3) 15%, 
        rgba(118, 167, 255, 0.3) 85%, 
        transparent 100%);
      z-index: 0;
      display: none;
    }
    @media (min-width: 1000px) {
      .steps::after {
        display: block;
      }
    }

    /* Enhanced screenshot band with frame and effects */
    .band{ 
      padding: 40px 20px 20px; 
      position: relative;
    }
    .band::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 100px;
      background: linear-gradient(180deg, rgba(8, 42, 105, 0.3), transparent);
      z-index: -1;
    }
    .shot{ 
      max-width: 1200px; 
      margin: 0 auto; 
      border-radius: var(--round); 
      overflow: hidden; 
      border: 1px solid rgba(255, 255, 255, 0.15); 
      background: #0c275e; 
      box-shadow: var(--shadow), 0 20px 40px rgba(0, 0, 0, 0.2);
      position: relative;
    }
    .shot::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 40px;
      background: linear-gradient(180deg, rgba(12, 39, 94, 0.8), rgba(12, 39, 94, 0.1));
      z-index: 1;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    .shot::after {
      content: "";
      position: absolute;
      top: 12px;
      left: 15px;
      width: 12px;
      height: 12px;
      background: #ff6b6b;
      border-radius: 50%;
      box-shadow: 24px 0 0 #ffca28, 48px 0 0 #2bd4a7;
      z-index: 2;
    }
    .shot img{ 
      width: 100%; 
      display: block; 
      transition: transform 0.8s ease; 
      transform-origin: center;
    }
    .shot:hover img{ 
      transform: scale(1.03); 
    }
    .shot-caption{ 
      color: var(--accent); 
      font-size: 14px; 
      text-align: center; 
      margin-top: 15px;
      font-weight: 500;
    }
    .shot-nav {
      display: flex;
      gap: 12px;
      justify-content: center;
      padding: 15px;
    }
    .shot-nav .btn {
      min-width: 44px;
      height: 44px;
      padding: 0;
      display: grid;
      place-items: center;
      border-radius: 50%;
      font-size: 18px;
      transition: all var(--speed-fast) ease;
    }
    .shot-nav .btn:hover {
      transform: translateY(-3px) scale(1.05);
    }
    .shot-counter {
      display: flex;
      justify-content: center;
      gap: 5px;
      margin-top: 10px;
    }
    .shot-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transition: all var(--speed-fast) ease;
    }
    .shot-dot.active {
      background: var(--accent);
      transform: scale(1.2);
    }

    /* Enhanced statistics with animated counters and better visual design */
    .stats{ 
      padding: 40px 20px; 
      margin-top: 30px;
      background: linear-gradient(180deg, rgba(10, 47, 110, 0), rgba(10, 47, 110, 0.2), rgba(10, 47, 110, 0));
    }
    .stats-grid{ 
      max-width: 1000px; 
      margin: 0 auto; 
      display: grid; 
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); 
      gap: 24px;
    }
    .stat{ 
      text-align: center; 
      background: var(--glass); 
      border: 1px solid var(--border-color); 
      border-radius: var(--round); 
      padding: 30px; 
      transition: all var(--speed-normal) ease;
      position: relative;
      overflow: hidden;
    }
    .stat:hover {
      transform: translateY(-5px);
      background: var(--glass-2);
      border-color: var(--border-accent);
      box-shadow: var(--shadow-sm);
    }
    .stat::before {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transition: transform 0.8s ease;
    }
    .stat:hover::before {
      transform: translateX(200%);
    }
    .num{ 
      font-size: 2.5rem; 
      font-weight: 900; 
      color: var(--accent); 
      text-shadow: 0 6px 18px rgba(43, 91, 229, 0.25);
      margin-bottom: 5px;
      font-family: var(--font-heading);
      background: linear-gradient(135deg, var(--white), var(--accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .label{ 
      color: var(--muted); 
      font-weight: 600;
      font-size: 16px;
    }

    /* Enhanced testimonials carousel with quote styling and smooth transitions */
    .testimonials{ 
      padding: 50px 20px; 
      position: relative;
    }
    .testimonials::before {
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      width: 300px;
      height: 300px;
      background: radial-gradient(circle, rgba(43, 212, 167, 0.1), transparent 70%);
      transform: translate(-50%, -50%);
      border-radius: 50%;
      z-index: -1;
      filter: blur(50px);
    }
    .ts-wrap{ 
      max-width: 1000px; 
      margin: 0 auto; 
      position: relative; 
    }
    .ts{ 
      background: var(--panel-bg); 
      border: 1px solid var(--border-color); 
      border-radius: var(--round); 
      padding: 40px 30px 30px; 
      color: var(--white); 
      box-shadow: var(--shadow);
      position: relative;
      transition: transform var(--speed-normal) ease;
    }
    .ts:hover {
      transform: translateY(-5px);
    }
    .ts::before {
      content: """;
      position: absolute;
      top: -30px;
      left: 30px;
      font-size: 120px;
      font-family: Georgia, serif;
      color: rgba(118, 167, 255, 0.15);
      line-height: 1;
    }
    .ts-quote{ 
      font-size: 1.15rem; 
      line-height: 1.7; 
      color: #e8f1ff;
      font-style: italic;
      position: relative;
    }
    .ts-meta{ 
      display: flex; 
      gap: 12px; 
      align-items: center; 
      margin-top: 20px; 
      color: var(--accent); 
      font-size: 1rem;
      font-weight: 600;
      padding-top: 15px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    .ts-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: var(--glass);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: var(--white);
      border: 2px solid rgba(255, 255, 255, 0.2);
    }
    .ts-nav{ 
      position: absolute; 
      inset: 0; 
      display: flex; 
      align-items: center; 
      justify-content: space-between; 
      pointer-events: none;
      padding: 0 10px;
    }
    .navbtn{ 
      pointer-events: auto; 
      all: unset; 
      width: 48px; 
      height: 48px; 
      border-radius: 50%; 
      display: grid; 
      place-items: center; 
      background: rgba(255, 255, 255, 0.1); 
      border: 1px solid var(--border-color); 
      color: #fff; 
      cursor: pointer;
      transition: all var(--speed-fast) ease;
      font-size: 20px;
    }
    .navbtn:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: var(--border-accent);
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    }
    .ts-dots {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 20px;
    }
    .ts-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      cursor: pointer;
      transition: all var(--speed-fast) ease;
    }
    .ts-dot.active {
      background: var(--accent);
      transform: scale(1.2);
    }
    .ts-dot:hover {
      background: rgba(255, 255, 255, 0.5);
    }

    /* Enhanced FAQ accordion with smooth animations */
    .faq{ 
      padding: 30px 20px 50px; 
      max-width: 1000px; 
      margin: 0 auto; 
    }
    .faq h2{ 
      color: var(--white); 
      text-align: center; 
      margin: 0 0 30px; 
      font-size: 32px;
      font-weight: 800;
      font-family: var(--font-heading);
      position: relative;
      display: inline-block;
      left: 50%;
      transform: translateX(-50%);
      padding-bottom: 15px;
    }
    .faq h2::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 3px;
      background: var(--accent);
      border-radius: 3px;
    }
    .q{ 
      background: var(--glass); 
      border: 1px solid var(--border-color); 
      border-radius: var(--round-sm); 
      margin: 16px 0; 
      overflow: hidden;
      transition: all var(--speed-normal) ease;
    }
    .q:hover {
      background: var(--glass-2);
      border-color: var(--border-accent);
      box-shadow: var(--shadow-sm);
    }
    .q button{ 
      all: unset; 
      display: flex; 
      width: 100%; 
      justify-content: space-between; 
      align-items: center; 
      padding: 18px 20px; 
      cursor: pointer; 
      font-weight: 700; 
      color: var(--white);
      transition: background var(--speed-fast) ease;
    }
    .q button .icon {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: grid;
      place-items: center;
      background: rgba(255, 255, 255, 0.1);
      transition: all var(--speed-fast) ease;
      font-size: 16px;
      font-weight: 400;
    }
    .q button:hover{ 
      background: rgba(255, 255, 255, 0.07);
    }
    .q button:hover .icon {
      background: rgba(255, 255, 255, 0.15);
      transform: rotate(90deg);
    }
    .q.open button .icon {
      background: var(--accent);
      transform: rotate(135deg);
    }
    .a{ 
      display: none; 
      padding: 0 20px 20px; 
      color: var(--muted);
      line-height: 1.7;
      font-size: 15px;
    }
    .q.open{ 
      background: var(--glass-2);
      border-color: rgba(255, 255, 255, 0.25);
      box-shadow: var(--shadow-sm);
    }
    .q.open .a{ 
      display: block; 
      animation: drop 0.3s ease; 
    }
    @keyframes drop{ 
      from{ 
        opacity: 0; 
        transform: translateY(-10px); 
      } 
      to{ 
        opacity: 1; 
        transform: none; 
      } 
    }

    /* Enhanced marquee with hover effects */
    .marquee{ 
      padding: 15px 0; 
      margin-top: 8px; 
      border-top: 1px solid var(--border-color); 
      border-bottom: 1px solid var(--border-color); 
      background: rgba(10, 47, 110, 0.4);
      position: relative;
      overflow: hidden;
    }
    .marquee::before, .marquee::after {
      content: "";
      position: absolute;
      top: 0;
      width: 100px;
      height: 100%;
      z-index: 2;
      pointer-events: none;
    }
    .marquee::before {
      left: 0;
      background: linear-gradient(90deg, rgba(10, 47, 110, 0.9), transparent);
    }
    .marquee::after {
      right: 0;
      background: linear-gradient(-90deg, rgba(10, 47, 110, 0.9), transparent);
    }
    .marquee .track{ 
      display: flex; 
      gap: 36px; 
      min-width: max-content; 
      animation: scroll 30s linear infinite; 
      padding: 5px 0;
    }
    .marquee:hover .track{ 
      animation-play-state: paused; 
    }
    .pill{ 
      background: rgba(255, 255, 255, 0.1); 
      color: var(--white); 
      border: 1px solid rgba(255, 255, 255, 0.13); 
      padding: 10px 16px; 
      border-radius: 999px; 
      font-weight: 700; 
      white-space: nowrap;
      transition: all var(--speed-fast) ease;
      transform: translateY(0);
    }
    .pill:hover {
      transform: translateY(-3px) scale(1.05);
      background: rgba(255, 255, 255, 0.15);
      border-color: rgba(255, 255, 255, 0.2);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
    }
    @keyframes scroll{ 
      from{ transform: translateX(0) } 
      to{ transform: translateX(-50%) } 
    }

    /* Enhanced footer with improved layout and animations */
    .footer{ 
      background: var(--glass-3); 
      border-top: 1px solid var(--border-color); 
      padding: 40px 20px 30px; 
      color: var(--muted);
      position: relative;
      overflow: hidden;
      margin-top: 40px;
    }
    
    /* Add a gradient background effect to the footer */
    .footer::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, 
        rgba(255,255,255,0) 0%, 
        rgba(255,255,255,0.3) 50%, 
        rgba(255,255,255,0) 100%);
    }
    
    .footer-content {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      max-width: 1200px;
      margin: 0 auto;
      gap: 30px;
    }
    
    .footer-logo-section {
      flex: 1 1 300px;
    }
    
    .footer-logo {
      display: block;
      margin-bottom: 15px;
      transition: transform var(--speed-normal) ease;
      text-decoration: none;
    }
    
    .footer-logo:hover {
      transform: scale(1.05);
    }
    
    .footer-description {
      font-size: 14px;
      line-height: 1.6;
      margin-bottom: 20px;
      max-width: 300px;
    }
    
    .footer-nav-section {
      flex: 1 1 200px;
    }
    
    .footer-heading {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 15px;
      color: var(--white);
    }
    
    .footer-links {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    
    .footer-links li {
      margin-bottom: 10px;
    }
    
    .footer-links a {
      color: var(--muted);
      text-decoration: none;
      font-size: 14px;
      transition: color var(--speed-fast) ease, transform var(--speed-fast) ease;
      display: inline-block;
    }
    
    .footer-links a:hover {
      color: var(--white);
      transform: translateX(3px);
    }
    
    .footer-contact-section {
      flex: 1 1 300px;
    }
    
    .contact-info {
      margin-bottom: 20px;
    }
    
    .contact-info p {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
      font-size: 14px;
    }
    
    .contact-info i {
      margin-right: 10px;
      color: var(--accent);
    }
    
    .social-links {
      display: flex;
      gap: 15px;
    }
    
    .social-links a {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      color: var(--white);
      transition: all var(--speed-fast) ease;
    }
    
    .social-links a:hover {
      background: var(--accent);
      transform: translateY(-3px);
    }
    
    .copyright {
      text-align: center;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      font-size: 13px;
    }
    
    @media (max-width: 768px) {
      .footer-content {
        flex-direction: column;
        gap: 30px;
      }
      
      .footer-logo-section,
      .footer-nav-section,
      .footer-contact-section {
        flex: 1 1 100%;
      }
    }

    /* Back to top button */
    .back-to-top {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: linear-gradient(135deg, #7db1ff, #4f89ff);
      color: #fff;
      font-size: 24px;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transform: translateY(20px);
      transition: all var(--speed-normal) ease;
      box-shadow: 0 5px 15px rgba(76, 136, 255, 0.3);
      z-index: 100;
    }
    
    .back-to-top:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(76, 136, 255, 0.4);
    }
    
    .back-to-top.visible {
      opacity: 1;
      transform: translateY(0);
    }
    
    @media (max-width: 768px) {
      .back-to-top {
        bottom: 20px;
        right: 20px;
        width: 40px;
        height: 40px;
        font-size: 20px;
      }
    }

    /* Responsive tweaks */
    @media (max-width: 768px){
      .nav{ padding: 0 6px; }
      .btn{ padding: 9px 14px; font-size:14px; }
      .hero{ padding-top: 72px; }
    }
  </style>
</head>
<body>
  <div class="bg"><div class="wave"></div><div class="wave wave2"></div></div>
  <div class="mesh" aria-hidden="true"><div class="m1"></div><div class="m2"></div><div class="m3"></div></div>

  <header class="header">
    <nav class="nav">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div class="t">CheckLoop</div>
      </div>
      <div class="nav-links">
        <a href="#cqc">CQC Ready</a>
        <a href="#features">Features</a>
        <a href="#how">How it works</a>
        <a href="staff.html">Staff App</a>
      </div>
      <div class="auth-buttons">
        <button class="btn secondary" onclick="window.location.href='home.html'">Sign In</button>
        <button class="btn primary" onclick="window.location.href='signup.html'">Get Started</button>
      </div>
    </nav>
  </header>
  <div class="progress-wrap"><div class="progress" id="progress"></div></div>
  <main class="main">
    <section class="cqc reveal" id="cqc" aria-label="CQC readiness banner">
      <div class="card">
        <div class="glow" aria-hidden="true"></div>
        <div class="cqc-wrap" style="width:100%">
          <div style="display:flex; flex-direction:column; gap:6px; min-width:260px;">
            <div class="badge"><span class="shield"></span> CQC INSPECTION READY</div>
            <h2>Be inspection‑ready at any time — with live training, daily checks, complaints learning and PIR evidence in one place.</h2>
            <div class="sub">Designed around what inspectors look for, so you’re always prepared.</div>
          </div>
          <div class="cqc-meter" aria-label="Readiness indicator">
            <div class="meter-ring" id="cqcRing" style="--p:0%"></div>
            <div class="meter-hole"><span id="cqcNum">0%</span></div>
          </div>
          <div class="cqc-points">
            <div class="pill">✔ Training Matrix</div>
            <div class="pill">✔ Checks & Audits</div>
            <div class="pill">✔ Complaints & Learning</div>
            <div class="pill">✔ PIR Evidence</div>
          </div>
        </div>
      </div>
    </section>
    <section class="hero">
      <div class="eyebrow">Built for GP Practices</div>
      <h1>CQC Inspection Ready — all‑in‑one compliance, training and daily checks</h1>
      <p>CheckLoop keeps your practice inspection‑ready. Configure room and equipment checks, track mandatory training with a live matrix, capture complaints with AI assistance, manage PIR evidence, and empower staff with a simple kiosk‑style app.</p>
      <div class="hero-ctas">
        <button class="btn primary" onclick="window.location.href='signup.html'">Start Free Trial</button>
        <button class="btn secondary" onclick="window.location.href='home.html'">Sign In</button>
        <button class="btn secondary" onclick="window.location.href='staff.html'">Open Staff App</button>
      </div>
      <div class="subhint">No installs. Secure Supabase backend. Role‑based access.</div>
      <div class="orbit o1"><div class="dot"></div></div>
      <div class="orbit o2"><div class="dot"></div></div>
    </section>

    <section class="marquee" aria-label="Trusted by">
      <div class="track" id="marqueeTrack">
        <div class="pill">Inspection‑ready by design</div>
        <div class="pill">Live training matrix</div>
        <div class="pill">Fast room & equipment checks</div>
        <div class="pill">AI‑assisted complaints</div>
        <div class="pill">Secure Supabase</div>
        <div class="pill">Invite by email</div>
        <div class="pill">CSV exports</div>
        <div class="pill">Role‑based access</div>
        <!-- duplicated for seamless loop -->
        <div class="pill">Inspection‑ready by design</div>
        <div class="pill">Live training matrix</div>
        <div class="pill">Fast room & equipment checks</div>
        <div class="pill">AI‑assisted complaints</div>
        <div class="pill">Secure Supabase</div>
        <div class="pill">Invite by email</div>
        <div class="pill">CSV exports</div>
        <div class="pill">Role‑based access</div>
      </div>
    </section>

    <section id="features" class="features reveal" aria-label="Product features">
      <div class="card">
        <div class="icon">✔</div>
        <h3>Checks & Audits</h3>
        <p>Define daily/weekly checks for rooms and equipment. Staff submit scans and results in seconds; admins get instant visibility.</p>
        <ul class="list">
          <li>Room and equipment registers</li>
          <li>Fast submissions and exports</li>
          <li>Due/overdue tracking</li>
        </ul>
      </div>
      <div class="card">
        <div class="icon">🎓</div>
        <h3>Training Matrix</h3>
        <p>Live matrix with valid / due soon / expired status, per‑staff records, and exports. Designed for clinical and non‑clinical roles.</p>
        <ul class="list">
          <li>Training types per site</li>
          <li>Expiry logic + statuses</li>
          <li>CSV report export</li>
        </ul>
      </div>
      <div class="card">
        <div class="icon">📣</div>
        <h3>Complaints</h3>
        <p>Log complaints with categories, status and priority. Attach files and optionally extract text with AI to speed up entry.</p>
        <ul class="list">
          <li>Dashboard & reporting</li>
          <li>AI‑assisted capture (PDF/DOC)</li>
          <li>Team‑share options</li>
        </ul>
      </div>
      <div class="card">
        <div class="icon">👥</div>
        <h3>Staff App</h3>
        <p>Kiosk‑friendly staff portal for scans, training status and quick knowledge checks. Works great on tablets.</p>
        <ul class="list">
          <li>My Scans timeline</li>
          <li>My Training view</li>
          <li>Built‑in quiz</li>
        </ul>
      </div>
      <div class="card">
        <div class="icon">📁</div>
        <h3>PIR & Evidence</h3>
        <p>Centralise pre‑inspection (PIR) documents and evidence, upload attachments and generate export packs when needed.</p>
        <ul class="list">
          <li>Structured PIR prompts</li>
          <li>Attachments in secure storage</li>
          <li>Signed/public links as needed</li>
        </ul>
      </div>
      <div class="card">
        <div class="icon">🔐</div>
        <h3>Access & Invites</h3>
        <p>Owner/Admin/Staff roles with email invitations and PKCE auth. Sessions persist with auto token refresh.</p>
        <ul class="list">
          <li>Invite by email</li>
          <li>Per‑site context</li>
          <li>Secure Supabase auth</li>
        </ul>
      </div>
    </section>

    <section class="band reveal" aria-label="Screenshots carousel">
      <div class="shot" id="shot">
        <img id="shotImg" src="admin_index_view.png" alt="Admin dashboard screenshot">
      </div>
      <div class="shot-caption" id="shotCap">Admin dashboard with checks, training, complaints and PIR.</div>
      <div style="display:flex; gap:8px; justify-content:center; padding:8px;">
        <button class="btn secondary" id="prevShot" aria-label="Previous">◀</button>
        <button class="btn secondary" id="nextShot" aria-label="Next">▶</button>
      </div>
    </section>

    <section class="stats reveal" aria-label="Stats">
      <div class="stats-grid">
        <div class="stat"><div class="num" data-target="500" data-suffix="+">0</div><div class="label">Practices</div></div>
        <div class="stat"><div class="num" data-target="50000" data-suffix="+">0</div><div class="label">Equipment Items</div></div>
        <div class="stat"><div class="num" data-target="99.9" data-decimals="1" data-suffix="%">0</div><div class="label">Uptime</div></div>
        <div class="stat"><div class="num" data-target="24" data-suffix="/7">0</div><div class="label">Support</div></div>
      </div>
    </section>

    <section id="how" class="how reveal">
      <h2>How it works</h2>
      <div class="steps">
        <div class="step">
          <strong>1) Create your site</strong>
          <p>Sign up, set your site details and base configuration.</p>
        </div>
        <div class="step">
          <strong>2) Invite your team</strong>
          <p>Send email invites to staff with the right role and access.</p>
        </div>
        <div class="step">
          <strong>3) Configure checks</strong>
          <p>Add rooms, equipment and schedules. You’re ready to go.</p>
        </div>
        <div class="step">
          <strong>4) Run the day</strong>
          <p>Staff scan and submit. Admins monitor, export and report.</p>
        </div>
      </div>
    </section>

    <section class="testimonials reveal" aria-label="Testimonials">
      <div class="ts-wrap">
        <div class="ts" id="ts">
          <div class="ts-quote" id="tsQuote">“We finally see training gaps at a glance. CheckLoop’s matrix cut our admin time in half.”</div>
          <div class="ts-meta" id="tsMeta">— Practice Manager, North London</div>
        </div>
        <div class="ts-nav">
          <button class="navbtn" id="tsPrev">⟵</button>
          <button class="navbtn" id="tsNext">⟶</button>
        </div>
      </div>
    </section>

    <section class="faq reveal" aria-label="FAQ">
      <h2>Frequently Asked Questions</h2>
      <div class="q"><button type="button"><span>Is CheckLoop suitable for single‑site practices?</span><span>+</span></button><div class="a">Yes. It’s lightweight for single sites and scales to multi‑site groups with per‑site context.</div></div>
      <div class="q"><button type="button"><span>How do staff log in?</span><span>+</span></button><div class="a">Admins invite staff by email. Authentication is handled securely via Supabase with PKCE.</div></div>
      <div class="q"><button type="button"><span>Can we export data for inspections?</span><span>+</span></button><div class="a">Yes. Export training, submissions, and complaints to CSV, and collate PIR documents with attachments.</div></div>
      <div class="q"><button type="button"><span>Does it work on tablets?</span><span>+</span></button><div class="a">Absolutely. The staff app is kiosk‑friendly and tested on iPad‑class devices.</div></div>
    </section>
  </main>

  <button id="backToTop" class="back-to-top" aria-label="Back to top">↑</button>

  <footer class="footer">
    <div class="footer-content">
      <div class="footer-logo-section">
        <a href="/" class="footer-logo">
          <div style="display: flex; align-items: center; gap: 10px;">
            <div style="width: 32px; height: 32px; border-radius: 8px; background: linear-gradient(135deg, #9ec1ff, #3f78ff); display: grid; place-items: center;"></div>
            <span style="font-weight: 800; color: var(--white); font-size: 18px;">CheckLoop</span>
          </div>
        </a>
        <p class="footer-description">The complete compliance, training and checks solution for GP Practices.</p>
      </div>
      
      <div class="footer-nav-section">
        <h3 class="footer-heading">Platform</h3>
        <ul class="footer-links">
          <li><a href="#features">Features</a></li>
          <li><a href="#how">How it works</a></li>
          <li><a href="signup.html">Get Started</a></li>
          <li><a href="home.html">Sign In</a></li>
        </ul>
      </div>
      
      <div class="footer-nav-section">
        <h3 class="footer-heading">Resources</h3>
        <ul class="footer-links">
          <li><a href="#">Help Center</a></li>
          <li><a href="#">Documentation</a></li>
          <li><a href="#">API</a></li>
          <li><a href="#">Status</a></li>
        </ul>
      </div>
      
      <div class="footer-contact-section">
        <h3 class="footer-heading">Contact</h3>
        <div class="contact-info">
          <p><i>✉</i> support@checkloop.health</p>
          <p><i>📞</i> +44 20 1234 5678</p>
        </div>
        <div class="social-links">
          <a href="#" aria-label="Twitter"><span>𝕏</span></a>
          <a href="#" aria-label="LinkedIn"><span>in</span></a>
          <a href="#" aria-label="Facebook"><span>f</span></a>
        </div>
      </div>
    </div>
    
    <div class="copyright">
      &copy; 2025 CheckLoop • Built for GP Practices • <a href="#" style="color: inherit; text-decoration: underline;">Privacy Policy</a> • <a href="#" style="color: inherit; text-decoration: underline;">Terms of Service</a>
    </div>
  </footer>

  <!-- If the user is already authenticated, move them straight into the app. -->
  <script type="module">
    import { createClient } from "https://esm.sh/@supabase/supabase-js@2";
    const supabase = createClient(CONFIG.SUPABASE_URL, CONFIG.SUPABASE_ANON_KEY, {
      auth: { persistSession: true, autoRefreshToken: true, detectSessionInUrl: true }
    });
    try {
      const { data: { session } } = await supabase.auth.getSession();
      if (session && session.user) {
        // Match home.html behaviour — staff-first entry
        window.location.href = 'staff.html';
      }
    } catch (_) { /* public page continues */ }
  </script>
  <script>
    // Header shrink + scroll progress
    const header = document.querySelector('.header');
    const progress = document.getElementById('progress');
    const onScroll = () => {
      const y = window.scrollY || document.documentElement.scrollTop;
      header.classList.toggle('shrink', y > 8);
      const h = document.documentElement;
      const sc = (h.scrollTop) / (h.scrollHeight - h.clientHeight) * 100;
      progress.style.width = sc + '%';
      
      // Back to top button visibility
      const backToTopBtn = document.getElementById('backToTop');
      if (y > 500) {
        backToTopBtn.classList.add('visible');
      } else {
        backToTopBtn.classList.remove('visible');
      }
    };
    document.addEventListener('scroll', onScroll, { passive:true });
    onScroll();
    
    // Back to top button click handler
    document.getElementById('backToTop').addEventListener('click', () => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });

    // Scroll reveal
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{ if (e.isIntersecting) { 
        e.target.classList.add('in-view'); 
        e.target.style.opacity = 1; 
        e.target.style.transform = 'none'; 
        io.unobserve(e.target); 
      } });
    }, { threshold: .12 });
    document.querySelectorAll('.reveal').forEach(el=>{ el.style.opacity=0; el.style.transform='translateY(12px)'; el.style.transition='opacity .5s ease, transform .5s ease'; io.observe(el); });
    document.addEventListener('transitionend', (e)=>{
      if (e.target.classList.contains('reveal') && e.target.classList.contains('in-view')){
        e.target.style.opacity=''; e.target.style.transform=''; // clean inline once revealed
      }
    });

    // Animated counters
    const counters = document.querySelectorAll('.num');
    const io2 = new IntersectionObserver((es)=>{
      es.forEach(entry => {
        if (!entry.isIntersecting) return;
        const el = entry.target;
        io2.unobserve(el);
        const target = parseFloat(el.getAttribute('data-target')) || 0;
        const suffix = el.getAttribute('data-suffix') || '';
        const decimals = parseInt(el.getAttribute('data-decimals')||'0',10);
        const dur = 1200; const start = performance.now();
        const from = 0;
        const step = (t) => {
          const p = Math.min(1, (t - start)/dur);
          const val = from + (target - from) * (1 - Math.cos(p*Math.PI))/2; // easeOut
          el.textContent = val.toFixed(decimals) + suffix;
          if (p < 1) requestAnimationFrame(step);
        };
        requestAnimationFrame(step);
      });
    }, { threshold:.6 });
    counters.forEach(c=> io2.observe(c));

    // CQC readiness ring animation
    const ring = document.getElementById('cqcRing');
    const num = document.getElementById('cqcNum');
    const targetPct = 96; // demo value showing near‑ready status
    const io3 = new IntersectionObserver((es)=>{
      es.forEach(entry => {
        if (!entry.isIntersecting) return;
        io3.unobserve(entry.target);
        const dur = 1200; const start = performance.now();
        const from = 0; const to = targetPct;
        const tick = (t) => {
          const p = Math.min(1, (t - start)/dur);
          const val = Math.round(from + (to - from) * (1 - Math.cos(p*Math.PI))/2);
          ring.style.setProperty('--p', val + '%');
          num.textContent = val + '%';
          if (p < 1) requestAnimationFrame(tick);
        };
        requestAnimationFrame(tick);
      });
    }, { threshold:.6 });
    if (ring) io3.observe(ring);

    // Simple carousel for screenshots
    const shots = [
      { src:'admin_index_view.png', cap:'Admin dashboard with checks, training, complaints and PIR.' },
      { src:'admin_staff_view.png', cap:'Staff overview, site context and quick actions.' },
      { src:'training-matrix-final.png', cap:'Live training matrix with statuses and exports.' },
      { src:'training-menu-test.png', cap:'Staff training view on tablet‑friendly UI.' }
    ];
    let idx = 0;
    const img = document.getElementById('shotImg');
    const cap = document.getElementById('shotCap');
    const next = () => { idx = (idx+1)%shots.length; update(); };
    const prev = () => { idx = (idx-1+shots.length)%shots.length; update(); };
    const update = () => { img.style.opacity=0; setTimeout(()=>{ img.src=shots[idx].src; cap.textContent=shots[idx].cap; img.style.opacity=1; }, 120); };
    document.getElementById('nextShot').addEventListener('click', next);
    document.getElementById('prevShot').addEventListener('click', prev);
    setInterval(next, 6000);

    // Testimonials rotator
    const quotes = [
      { q:'“We finally see training gaps at a glance. CheckLoop’s matrix cut our admin time in half.”', m:'— Practice Manager, North London' },
      { q:'“Room check reminders keep us inspection‑ready. The exports made our PIR painless.”', m:'— Operations Lead, Manchester' },
      { q:'“Staff love the kiosk‑style app. Submissions went up and issues get spotted quicker.”', m:'— Clinical Lead, Bristol' }
    ];
    let qIdx = 0; const qEl = document.getElementById('tsQuote'); const mEl = document.getElementById('tsMeta');
    const qNext = () => { qIdx = (qIdx+1)%quotes.length; qEl.style.opacity=0; mEl.style.opacity=0; setTimeout(()=>{ qEl.textContent = quotes[qIdx].q; mEl.textContent = quotes[qIdx].m; qEl.style.opacity=1; mEl.style.opacity=1; }, 150); };
    const qPrev = () => { qIdx = (qIdx-1+quotes.length)%quotes.length; qEl.style.opacity=0; mEl.style.opacity=0; setTimeout(()=>{ qEl.textContent = quotes[qIdx].q; mEl.textContent = quotes[qIdx].m; qEl.style.opacity=1; mEl.style.opacity=1; }, 150); };
    document.getElementById('tsNext').addEventListener('click', qNext);
    document.getElementById('tsPrev').addEventListener('click', qPrev);
    setInterval(qNext, 7000);

    // FAQ accordion with enhanced UI
    document.querySelectorAll('.faq .q button').forEach(btn => {
      // Add icon span if it doesn't exist
      if (!btn.querySelector('.icon')) {
        const plusSpan = btn.querySelector('span:last-child');
        if (plusSpan && plusSpan.textContent === '+') {
          const iconSpan = document.createElement('span');
          iconSpan.className = 'icon';
          iconSpan.textContent = '+';
          btn.replaceChild(iconSpan, plusSpan);
        }
      }
      
      btn.addEventListener('click', () => {
        const parent = btn.parentElement;
        // Close other open FAQs when opening a new one
        if (!parent.classList.contains('open')) {
          document.querySelectorAll('.faq .q.open').forEach(openQ => {
            openQ.classList.remove('open');
          });
        }
        parent.classList.toggle('open');
      });
    });
    
    // Add interactive hover effects to mesh elements
    const meshElements = document.querySelectorAll('.mesh div');
    document.addEventListener('mousemove', (e) => {
      const x = e.clientX / window.innerWidth;
      const y = e.clientY / window.innerHeight;
      
      meshElements.forEach((el, i) => {
        const factor = (i + 1) * 5;
        const xOffset = (x - 0.5) * factor;
        const yOffset = (y - 0.5) * factor;
        
        el.style.transform = `translate(${xOffset}px, ${yOffset}px)`;
      });
    });
    
    // Smooth scroll for navigation links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          window.scrollTo({
            top: target.offsetTop - 100,
            behavior: 'smooth'
          });
        }
      });
    });
    
    // Add active state to navigation based on scroll position
    const sections = document.querySelectorAll('section[id]');
    const navLinks = document.querySelectorAll('.nav-links a');
    
    window.addEventListener('scroll', () => {
      let current = '';
      const scrollY = window.scrollY;
      
      sections.forEach(section => {
        const sectionTop = section.offsetTop - 200;
        const sectionHeight = section.offsetHeight;
        if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
          current = section.getAttribute('id');
        }
      });
      
      navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === `#${current}`) {
          link.classList.add('active');
        }
      });
    });
  </script>

    <!-- Debug Console - Persistent across all pages -->
    <script src="debug-console.js"></script>
</body>
</html>

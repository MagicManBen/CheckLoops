{
  "timestamp": "2025-09-20T15:19:03.888Z",
  "database_info": {
    "url": "https://unveoqnlqnobufhublyw.supabase.co",
    "schema": "public"
  },
  "tables": [
    {
      "name": "profiles",
      "rls_enabled": false,
      "policies": [],
      "columns": [
        {
          "column_name": "user_id",
          "data_type": "string",
          "sample_value": "a995b5a7-17c4-49af-b36a-cc9e0ee1ba50"
        },
        {
          "column_name": "full_name",
          "data_type": "string",
          "sample_value": "Benjamin Howard"
        },
        {
          "column_name": "email",
          "data_type": "string",
          "sample_value": "ben.howard@stoke.nhs.uk"
        },
        {
          "column_name": "avatar_url",
          "data_type": "string",
          "sample_value": "https://api.dicebear.com/7.x/adventurer/svg?seed=Ziggy24&scale=100&eyes=variant05&mouth=variant11&eyebrows=variant06&glasses=variant04&glassesProbability=100&earrings=variant05&earringsProbability=70&hair=long16&hairColor=b9a05f&hairProbability=30&skinColor=763900"
        },
        {
          "column_name": "site_id",
          "data_type": "number",
          "sample_value": 2
        },
        {
          "column_name": "org_id",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "role",
          "data_type": "string",
          "sample_value": "admin"
        },
        {
          "column_name": "internal_id",
          "data_type": "string",
          "sample_value": "efdecba4-b45e-4804-b3d8-ebaa58de280e"
        },
        {
          "column_name": "kiosk_user_id",
          "data_type": "object",
          "sample_value": null
        }
      ],
      "foreign_keys": [],
      "indexes": [],
      "permissions": {}
    },
    {
      "name": "master_users",
      "rls_enabled": false,
      "policies": [],
      "columns": [
        {
          "column_name": "id",
          "data_type": "string",
          "sample_value": "efdecba4-b45e-4804-b3d8-ebaa58de280e"
        },
        {
          "column_name": "auth_user_id",
          "data_type": "string",
          "sample_value": "a995b5a7-17c4-49af-b36a-cc9e0ee1ba50"
        },
        {
          "column_name": "email",
          "data_type": "string",
          "sample_value": "ben.howard@stoke.nhs.uk"
        },
        {
          "column_name": "full_name",
          "data_type": "string",
          "sample_value": "Benjamin Howard"
        },
        {
          "column_name": "nickname",
          "data_type": "string",
          "sample_value": "Ben H"
        },
        {
          "column_name": "avatar_url",
          "data_type": "string",
          "sample_value": "https://api.dicebear.com/7.x/adventurer/svg?seed=Ziggy24&scale=100&eyes=variant05&mouth=variant11&eyebrows=variant06&glasses=variant04&glassesProbability=100&earrings=variant05&earringsProbability=70&hair=long16&hairColor=b9a05f&hairProbability=30&skinColor=763900"
        },
        {
          "column_name": "site_id",
          "data_type": "number",
          "sample_value": 2
        },
        {
          "column_name": "org_id",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "access_type",
          "data_type": "string",
          "sample_value": "admin"
        },
        {
          "column_name": "role_detail",
          "data_type": "string",
          "sample_value": "Manager"
        },
        {
          "column_name": "active",
          "data_type": "boolean",
          "sample_value": true
        },
        {
          "column_name": "team_id",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "team_name",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "reports_to_id",
          "data_type": "number",
          "sample_value": 20
        },
        {
          "column_name": "pin_hash",
          "data_type": "string",
          "sample_value": "9090"
        },
        {
          "column_name": "pin_hmac",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "last_login",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "invite_status",
          "data_type": "string",
          "sample_value": "pending"
        },
        {
          "column_name": "invited_by",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "invite_token",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "invite_sent_at",
          "data_type": "string",
          "sample_value": "2025-09-20T06:38:00.417199+00:00"
        },
        {
          "column_name": "invite_accepted_at",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "invite_expires_at",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "allowed_pages",
          "data_type": "object",
          "sample_value": []
        },
        {
          "column_name": "holiday_approved",
          "data_type": "boolean",
          "sample_value": true
        },
        {
          "column_name": "holiday_entitlement",
          "data_type": "number",
          "sample_value": 25
        },
        {
          "column_name": "holiday_taken",
          "data_type": "number",
          "sample_value": 0
        },
        {
          "column_name": "holiday_remaining",
          "data_type": "number",
          "sample_value": 25
        },
        {
          "column_name": "working_hours",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "contract_hours",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "onboarding_complete",
          "data_type": "boolean",
          "sample_value": false
        },
        {
          "column_name": "next_quiz_due",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "training_completed",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "kiosk_user_id",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "created_at",
          "data_type": "string",
          "sample_value": "2025-09-20T06:38:00.417199+00:00"
        },
        {
          "column_name": "updated_at",
          "data_type": "string",
          "sample_value": "2025-09-20T14:35:57.410404+00:00"
        },
        {
          "column_name": "is_gp",
          "data_type": "boolean",
          "sample_value": false
        },
        {
          "column_name": "holiday_year",
          "data_type": "number",
          "sample_value": 2025
        },
        {
          "column_name": "weekly_hours",
          "data_type": "number",
          "sample_value": 37.48
        },
        {
          "column_name": "weekly_sessions",
          "data_type": "number",
          "sample_value": 0
        },
        {
          "column_name": "holiday_multiplier",
          "data_type": "number",
          "sample_value": 6
        },
        {
          "column_name": "calculated_hours",
          "data_type": "number",
          "sample_value": 0
        },
        {
          "column_name": "calculated_sessions",
          "data_type": "number",
          "sample_value": 0
        },
        {
          "column_name": "manual_override",
          "data_type": "boolean",
          "sample_value": false
        },
        {
          "column_name": "override_hours",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "override_sessions",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "monday_hours",
          "data_type": "number",
          "sample_value": 7.48
        },
        {
          "column_name": "tuesday_hours",
          "data_type": "number",
          "sample_value": 7.5
        },
        {
          "column_name": "wednesday_hours",
          "data_type": "number",
          "sample_value": 7.5
        },
        {
          "column_name": "thursday_hours",
          "data_type": "number",
          "sample_value": 7.5
        },
        {
          "column_name": "friday_hours",
          "data_type": "number",
          "sample_value": 7.5
        },
        {
          "column_name": "saturday_hours",
          "data_type": "number",
          "sample_value": 0
        },
        {
          "column_name": "sunday_hours",
          "data_type": "number",
          "sample_value": 0
        },
        {
          "column_name": "monday_sessions",
          "data_type": "number",
          "sample_value": 0
        },
        {
          "column_name": "tuesday_sessions",
          "data_type": "number",
          "sample_value": 0
        },
        {
          "column_name": "wednesday_sessions",
          "data_type": "number",
          "sample_value": 0
        },
        {
          "column_name": "thursday_sessions",
          "data_type": "number",
          "sample_value": 0
        },
        {
          "column_name": "friday_sessions",
          "data_type": "number",
          "sample_value": 0
        },
        {
          "column_name": "saturday_sessions",
          "data_type": "number",
          "sample_value": 0
        },
        {
          "column_name": "sunday_sessions",
          "data_type": "number",
          "sample_value": 0
        },
        {
          "column_name": "total_hours",
          "data_type": "number",
          "sample_value": 37.48
        },
        {
          "column_name": "total_sessions",
          "data_type": "number",
          "sample_value": 0
        },
        {
          "column_name": "final_annual_hours",
          "data_type": "number",
          "sample_value": 0
        },
        {
          "column_name": "final_annual_sessions",
          "data_type": "number",
          "sample_value": 0
        },
        {
          "column_name": "welcome_tour_shown",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "display_name",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "profile_created_at",
          "data_type": "string",
          "sample_value": "2025-09-20T06:38:00.417199"
        },
        {
          "column_name": "profile_updated_at",
          "data_type": "string",
          "sample_value": "2025-09-20T06:38:00.417199"
        },
        {
          "column_name": "welcome_completed_at",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "onboarding_required",
          "data_type": "boolean",
          "sample_value": true
        },
        {
          "column_name": "role",
          "data_type": "string",
          "sample_value": "Manager"
        },
        {
          "column_name": "total_holiday_entitlement",
          "data_type": "number",
          "sample_value": 25
        },
        {
          "column_name": "approved_holidays_used",
          "data_type": "number",
          "sample_value": 0
        },
        {
          "column_name": "last_required_quiz_at",
          "data_type": "object",
          "sample_value": null
        }
      ],
      "foreign_keys": [],
      "indexes": [],
      "permissions": {}
    },
    {
      "name": "holidays",
      "rls_enabled": false,
      "policies": [],
      "columns": [
        {
          "column_name": "id",
          "data_type": "string",
          "sample_value": "efdecba4-b45e-4804-b3d8-ebaa58de280e"
        },
        {
          "column_name": "auth_user_id",
          "data_type": "string",
          "sample_value": "a995b5a7-17c4-49af-b36a-cc9e0ee1ba50"
        },
        {
          "column_name": "user_id",
          "data_type": "string",
          "sample_value": "a995b5a7-17c4-49af-b36a-cc9e0ee1ba50"
        },
        {
          "column_name": "email",
          "data_type": "string",
          "sample_value": "ben.howard@stoke.nhs.uk"
        },
        {
          "column_name": "full_name",
          "data_type": "string",
          "sample_value": "Benjamin Howard"
        },
        {
          "column_name": "site_id",
          "data_type": "number",
          "sample_value": 2
        },
        {
          "column_name": "holiday_entitlement",
          "data_type": "number",
          "sample_value": 25
        },
        {
          "column_name": "holiday_taken",
          "data_type": "number",
          "sample_value": 0
        },
        {
          "column_name": "holiday_remaining",
          "data_type": "number",
          "sample_value": 25
        },
        {
          "column_name": "holiday_approved",
          "data_type": "boolean",
          "sample_value": true
        },
        {
          "column_name": "holiday_year",
          "data_type": "number",
          "sample_value": 2025
        },
        {
          "column_name": "total_holiday_entitlement",
          "data_type": "number",
          "sample_value": 25
        },
        {
          "column_name": "approved_holidays_used",
          "data_type": "number",
          "sample_value": 0
        }
      ],
      "foreign_keys": [],
      "indexes": [],
      "permissions": {}
    },
    {
      "name": "training_records",
      "rls_enabled": false,
      "policies": [],
      "columns": [
        {
          "column_name": "id",
          "data_type": "number",
          "sample_value": 17
        },
        {
          "column_name": "site_id",
          "data_type": "number",
          "sample_value": 2
        },
        {
          "column_name": "staff_id",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "training_type_id",
          "data_type": "number",
          "sample_value": 66
        },
        {
          "column_name": "completion_date",
          "data_type": "string",
          "sample_value": "2025-09-20"
        },
        {
          "column_name": "expiry_date",
          "data_type": "string",
          "sample_value": "2026-09-20"
        },
        {
          "column_name": "certificate_url",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "notes",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "created_at",
          "data_type": "string",
          "sample_value": "2025-09-20T09:54:45.873348+00:00"
        },
        {
          "column_name": "updated_at",
          "data_type": "string",
          "sample_value": "2025-09-20T09:54:45.873348+00:00"
        },
        {
          "column_name": "user_id",
          "data_type": "string",
          "sample_value": "55f1b4e6-01f4-452d-8d6c-617fe7794873"
        }
      ],
      "foreign_keys": [],
      "indexes": [],
      "permissions": {}
    },
    {
      "name": "training_types",
      "rls_enabled": false,
      "policies": [],
      "columns": [
        {
          "column_name": "id",
          "data_type": "number",
          "sample_value": 66
        },
        {
          "column_name": "site_id",
          "data_type": "number",
          "sample_value": 2
        },
        {
          "column_name": "name",
          "data_type": "string",
          "sample_value": "Information Governance / Data Security Awareness"
        },
        {
          "column_name": "description",
          "data_type": "string",
          "sample_value": "How to handle patient/staff information securely: confidentiality, data protection, cyber hygiene."
        },
        {
          "column_name": "validity_months",
          "data_type": "number",
          "sample_value": 12
        },
        {
          "column_name": "is_clinical_required",
          "data_type": "boolean",
          "sample_value": true
        },
        {
          "column_name": "is_non_clinical_required",
          "data_type": "boolean",
          "sample_value": true
        },
        {
          "column_name": "active",
          "data_type": "boolean",
          "sample_value": true
        },
        {
          "column_name": "created_at",
          "data_type": "string",
          "sample_value": "2025-09-19T10:20:45.596714+00:00"
        },
        {
          "column_name": "updated_at",
          "data_type": "string",
          "sample_value": "2025-09-19T10:23:37.173384+00:00"
        }
      ],
      "foreign_keys": [],
      "indexes": [],
      "permissions": {}
    },
    {
      "name": "achievements",
      "rls_enabled": false,
      "policies": [],
      "columns": [
        {
          "column_name": "key",
          "data_type": "string",
          "sample_value": "onboarding_completion"
        },
        {
          "column_name": "name",
          "data_type": "string",
          "sample_value": "Onboarding Complete"
        },
        {
          "column_name": "description",
          "data_type": "string",
          "sample_value": "Successfully completed the onboarding process and joined the team!"
        },
        {
          "column_name": "icon",
          "data_type": "string",
          "sample_value": "trophy"
        },
        {
          "column_name": "points",
          "data_type": "number",
          "sample_value": 0
        },
        {
          "column_name": "metadata",
          "data_type": "object",
          "sample_value": {
            "category": "milestone"
          }
        },
        {
          "column_name": "created_at",
          "data_type": "string",
          "sample_value": "2025-09-17T19:08:47.839794+00:00"
        }
      ],
      "foreign_keys": [],
      "indexes": [],
      "permissions": {}
    },
    {
      "name": "quiz_questions",
      "rls_enabled": false,
      "policies": [],
      "columns": [
        {
          "column_name": "id",
          "data_type": "number",
          "sample_value": 2
        },
        {
          "column_name": "site_id",
          "data_type": "number",
          "sample_value": 2
        },
        {
          "column_name": "question_text",
          "data_type": "string",
          "sample_value": "Which of the following is NOT one of the CQC's five key questions?"
        },
        {
          "column_name": "hint",
          "data_type": "string",
          "sample_value": "Think: Safe, Effective, Caring, Responsive, Well-led."
        },
        {
          "column_name": "explanation",
          "data_type": "string",
          "sample_value": "The five key questions are Safe, Effective, Caring, Responsive, and Well-led. \"Efficient\" is not one."
        },
        {
          "column_name": "category",
          "data_type": "string",
          "sample_value": "CQC Framework"
        },
        {
          "column_name": "difficulty",
          "data_type": "string",
          "sample_value": "easy"
        },
        {
          "column_name": "is_active",
          "data_type": "boolean",
          "sample_value": false
        },
        {
          "column_name": "created_by",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "created_at",
          "data_type": "string",
          "sample_value": "2025-09-05T20:26:50.914029+00:00"
        },
        {
          "column_name": "updated_at",
          "data_type": "string",
          "sample_value": "2025-09-09T14:16:36.040293+00:00"
        },
        {
          "column_name": "options",
          "data_type": "object",
          "sample_value": [
            "\"Effective\"",
            "\"Caring\"",
            "\"Safe\"",
            "\"Efficient\""
          ]
        },
        {
          "column_name": "correct_index",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "tags",
          "data_type": "object",
          "sample_value": []
        },
        {
          "column_name": "category_id",
          "data_type": "number",
          "sample_value": 19
        },
        {
          "column_name": "correct_answer",
          "data_type": "object",
          "sample_value": null
        }
      ],
      "foreign_keys": [],
      "indexes": [],
      "permissions": {}
    },
    {
      "name": "quiz_attempts",
      "rls_enabled": false,
      "policies": [],
      "columns": [],
      "foreign_keys": [],
      "indexes": [],
      "permissions": {}
    },
    {
      "name": "complaints",
      "rls_enabled": false,
      "policies": [],
      "columns": [
        {
          "column_name": "id",
          "data_type": "string",
          "sample_value": "0110cf65-1033-427e-9eaa-c313cea454af"
        },
        {
          "column_name": "site_id",
          "data_type": "number",
          "sample_value": 2
        },
        {
          "column_name": "datetime",
          "data_type": "string",
          "sample_value": "2019-11-22T12:00:00+00:00"
        },
        {
          "column_name": "patient_initials",
          "data_type": "string",
          "sample_value": "NAN"
        },
        {
          "column_name": "category",
          "data_type": "string",
          "sample_value": "MEDICATION"
        },
        {
          "column_name": "original_complaint",
          "data_type": "string",
          "sample_value": "Patient angry that prescription had not been completed and that this happens every time he orders meds"
        },
        {
          "column_name": "response",
          "data_type": "string",
          "sample_value": "Tray sorted for patient, has early onset dementia and anxiety and does not leave the house often.. was not ordering script hence not done, now chemist will order for trays and deliver to house."
        },
        {
          "column_name": "lessons_learned",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "status",
          "data_type": "string",
          "sample_value": "resolved"
        },
        {
          "column_name": "priority",
          "data_type": "string",
          "sample_value": "medium"
        },
        {
          "column_name": "share_with_team",
          "data_type": "boolean",
          "sample_value": false
        },
        {
          "column_name": "original_document_url",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "response_document_url",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "ai_extracted",
          "data_type": "boolean",
          "sample_value": false
        },
        {
          "column_name": "created_by",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "created_at",
          "data_type": "string",
          "sample_value": "2025-09-04T09:18:50.888014+00:00"
        },
        {
          "column_name": "updated_at",
          "data_type": "string",
          "sample_value": "2025-09-04T14:03:37.3018+00:00"
        },
        {
          "column_name": "resolved_at",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "complaint_date",
          "data_type": "string",
          "sample_value": "2019-11-22"
        },
        {
          "column_name": "age",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "complaint_number",
          "data_type": "string",
          "sample_value": "20"
        },
        {
          "column_name": "response_sent",
          "data_type": "boolean",
          "sample_value": true
        },
        {
          "column_name": "complaint_summary",
          "data_type": "string",
          "sample_value": "Patient angry that prescription had not been completed and that this happens every time he orders meds"
        },
        {
          "column_name": "solution_given",
          "data_type": "string",
          "sample_value": "Tray sorted for patient, has early onset dementia and anxiety and does not leave the house often.. was not ordering script hence not done, now chemist will order for trays and deliver to house."
        },
        {
          "column_name": "category_trends",
          "data_type": "string",
          "sample_value": "MEDICATION"
        },
        {
          "column_name": "people_involved",
          "data_type": "string",
          "sample_value": "Nan"
        },
        {
          "column_name": "avenue_used",
          "data_type": "object",
          "sample_value": null
        },
        {
          "column_name": "suggestions_prevent_reoccurrence",
          "data_type": "string",
          "sample_value": "Nan"
        },
        {
          "column_name": "actions_to_be_taken",
          "data_type": "string",
          "sample_value": "Nan"
        }
      ],
      "foreign_keys": [],
      "indexes": [],
      "permissions": {}
    },
    {
      "name": "meetings",
      "rls_enabled": false,
      "policies": [],
      "columns": [],
      "foreign_keys": [],
      "indexes": [],
      "permissions": {}
    },
    {
      "name": "teams",
      "rls_enabled": false,
      "policies": [],
      "columns": [
        {
          "column_name": "id",
          "data_type": "number",
          "sample_value": 13
        },
        {
          "column_name": "site_id",
          "data_type": "number",
          "sample_value": 2
        },
        {
          "column_name": "name",
          "data_type": "string",
          "sample_value": "Data Team"
        }
      ],
      "foreign_keys": [],
      "indexes": [],
      "permissions": {}
    },
    {
      "name": "sites",
      "rls_enabled": false,
      "policies": [],
      "columns": [
        {
          "column_name": "id",
          "data_type": "number",
          "sample_value": 2
        },
        {
          "column_name": "name",
          "data_type": "string",
          "sample_value": "Harley Street Medical Centre"
        },
        {
          "column_name": "city",
          "data_type": "string",
          "sample_value": "London"
        },
        {
          "column_name": "created_at",
          "data_type": "string",
          "sample_value": "2025-08-12T19:08:11.203414+00:00"
        }
      ],
      "foreign_keys": [],
      "indexes": [],
      "permissions": {}
    }
  ],
  "summary": {
    "total_tables": 12,
    "rls_enabled": 0,
    "rls_disabled": 12,
    "total_policies": 0,
    "tables_without_policies": [
      "profiles",
      "master_users",
      "holidays",
      "training_records",
      "training_types",
      "achievements",
      "quiz_questions",
      "quiz_attempts",
      "complaints",
      "meetings",
      "teams",
      "sites"
    ]
  }
}